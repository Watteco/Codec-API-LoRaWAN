"use strict";function _defineProperties(e,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,a,t){return a&&_defineProperties(e.prototype,a),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var a=_toPrimitive(e,"string");return"symbol"==_typeof(a)?a:a+""}function _toPrimitive(e,a){if("object"!=_typeof(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,a||"default");if("object"!=_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _callSuper(e,a,t){return a=_getPrototypeOf(a),_possibleConstructorReturn(e,_isNativeReflectConstruct()?Reflect.construct(a,t||[],_getPrototypeOf(e).constructor):a.apply(e,t))}function _possibleConstructorReturn(e,a){if(a&&("object"==_typeof(a)||"function"==typeof a))return a;if(void 0!==a)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _inherits(e,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),a&&_setPrototypeOf(e,a)}function _wrapNativeSuper(e){var a="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==a){if(a.has(e))return a.get(e);a.set(e,t)}function t(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(t,e)},_wrapNativeSuper(e)}function _construct(e,a,t){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,a);var i=new(e.bind.apply(e,r));return t&&_setPrototypeOf(i,t.prototype),i}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function _isNativeFunction(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(a){return"function"==typeof e}}function _setPrototypeOf(e,a){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,a){return e.__proto__=a,e},_setPrototypeOf(e,a)}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var driver;!function(){var e={652:function(e){var a=[];a[0]=0,a[1]=1,a[2]=4,a[3]=4,a[4]=8,a[5]=8,a[6]=16,a[7]=16,a[8]=24,a[9]=24,a[10]=32,a[11]=32,a[12]=32;var t=[[{sz:2,lbl:0},{sz:2,lbl:1},{sz:2,lbl:3},{sz:3,lbl:5},{sz:4,lbl:9},{sz:5,lbl:17},{sz:6,lbl:33},{sz:7,lbl:65},{sz:8,lbl:129},{sz:10,lbl:512},{sz:11,lbl:1026},{sz:11,lbl:1027},{sz:11,lbl:1028},{sz:11,lbl:1029},{sz:11,lbl:1030},{sz:11,lbl:1031}],[{sz:7,lbl:111},{sz:5,lbl:26},{sz:4,lbl:12},{sz:3,lbl:3},{sz:3,lbl:7},{sz:2,lbl:2},{sz:2,lbl:0},{sz:3,lbl:2},{sz:6,lbl:54},{sz:9,lbl:443},{sz:9,lbl:441},{sz:10,lbl:885},{sz:10,lbl:884},{sz:10,lbl:880},{sz:11,lbl:1763},{sz:11,lbl:1762}],[{sz:4,lbl:9},{sz:3,lbl:5},{sz:2,lbl:0},{sz:2,lbl:1},{sz:2,lbl:3},{sz:5,lbl:17},{sz:6,lbl:33},{sz:7,lbl:65},{sz:8,lbl:129},{sz:10,lbl:512},{sz:11,lbl:1026},{sz:11,lbl:1027},{sz:11,lbl:1028},{sz:11,lbl:1029},{sz:11,lbl:1030},{sz:11,lbl:1031}]];function r(e,a,t,r){return{uncompressSamples:[{data_relative_timestamp:r,data:{value:s(e,a),label:t}}],codingType:0,codingTable:0,resolution:null}}function i(e,a){for(var t=0;t<e.length;t++)if(e[t].taglbl===a.lbl)return t;throw new Error("Batch : Cannot find i1 in argList")}function n(e,a){if(a){var t=e.getNextBifromHi(1);return o(e,a,t)}return e.getNextSample(10)}function o(e,a,t){return t>14?e.getNextSample(10):t>0?function(e,a,t){return e.getNextSample(10,t)+a+Math.pow(2,t)-1}(e,a,t):a}function s(e,a){var t=e.getNextSample(a);return 12===a?function(e){var a=2147483648&e?-1:1,t=(e>>23&255)-127,r=8388607&e;if(128===t)return a*(r?Number.NaN:Number.POSITIVE_INFINITY);if(-127===t){if(0===r)return 0*a;t=-126,r/=1<<22}else r=(r|1<<23)/(1<<23);return a*r*Math.pow(2,t)}(t):t}function d(e,a,t,r,i){var n=e.getNextSample(6,i);return 0===t?function(e,a,t,r){return e>=Math.pow(2,r-1)?e*a+t:(e+1-Math.pow(2,r))*a+t}(n,r,a,i):1===t?(n+Math.pow(2,i)-1)*r+a:a-(n+(Math.pow(2,i)-1))*r}Math.trunc=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)},e.exports={normalisation_batch:function(e){for(var s=e.date,_=function(e,s,_,u){var c=function(){for(var e=[],a=0;a<16;)e.push({codingType:0,codingTable:0,resolution:null,uncompressSamples:[]}),a+=1;return{batch_counter:0,batch_relative_timestamp:0,series:e}}(),l=function(e){function r(e,a,t){var r=a,i=t-1;if(8*e.length<r+t)throw new Error("Batch : Verify that dest buf is large enough");for(var n=0,o=0;t>0;)e[r>>3]&1<<(7&r)&&(o|=1<<i-n),t--,n++,r++;return o}return{i1:0,byteArray:e,getNextSample:function(e,t){var r=t||a[e],i=this.i1;if(this.i1+=r,12===e&&32!==r)throw new Error("Batch : Mauvais sampletype");var n=0,o=Math.trunc((r-1)/8)+1,s=r%8;for(0===s&&o>0&&(s=8);o>0;){for(var d=0;s>0;){var _=i>>3;this.byteArray[_]&1<<(7&i)&&(n|=1<<8*(o-1)+d),s--,d++,i+=1}o--,s=8}if((3==e||5==e||7==e||9==e)&&n&1<<r-1)for(var u=r;u<32;u++)n|=1<<u,r++;return n},getNextBifromHi:function(e){for(var a=2;a<12;a++)for(var i=r(this.byteArray,this.i1,a),n=0;n<t[e].length;n++)if(t[e][n].sz==a&&i==t[e][n].lbl)return this.i1+=a,n;throw new Error("Bi not found in HUFF table")}}}(function(e){for(var a=[];e.length>=2;)a.push(parseInt(e.substring(0,2),16)),e=e.substring(2,e.length);return a}(_)),p=function(e){for(var a=e.toString(2);a.length<8;)a="0"+a;return{isCommonTimestamp:parseInt(a[a.length-2],2),hasSample:!parseInt(a[a.length-3],2),batch_req:parseInt(a[a.length-4],2),nb_of_type_measure:parseInt(a.substring(0,4),2)}}(l.getNextSample(4));c.batch_counter=l.getNextSample(4,3),l.getNextSample(4,1);var v=function(e,a,t,o,s){for(var d=0,_=0,u=0;u<o.nb_of_type_measure;u++){var c={size:s,lbl:a.getNextSample(4,s)},l=i(t,c);0===u&&(_=l),d=n(a,d),e.series[l]=r(a,t[l].sampletype,c.lbl,d),o.hasSample&&(e.series[l].codingType=a.getNextSample(4,2),e.series[l].codingTable=a.getNextSample(4,2))}return{last_timestamp:d,i1_of_the_first_sample:_}}(c,l,s,p,e),m=v.last_timestamp,f=v.i1_of_the_first_sample;return p.hasSample&&(m=function(e,a,t,r,n,s,_){return s.isCommonTimestamp?function(e,a,t,r,n,o){for(var s=a.getNextSample(4,8),_={},u=function(e,a,t,r){for(var i=[],n=0,o=a.getNextSample(4,2),s=0;s<t;s++){var d=a.getNextBifromHi(o);if(d<=14)if(0===s)i.push(e.series[r].uncompressSamples[0].data_relative_timestamp);else{var _=i[s-1];d>0?i.push(a.getNextSample(10,d)+_+Math.pow(2,d)-1):i.push(_)}else i.push(a.getNextSample(10));n=i[s]}return{timestampCommon:i,lastTimestamp:n}}(e,a,s,t),c=u.timestampCommon,l=u.lastTimestamp,p=0;p<n.nb_of_type_measure;p++){var v=1;_.lbl=a.getNextSample(4,o);for(var m=i(r,_),f=0;f<s;f++)if(a.getNextSample(4,1)){var g=a.getNextBifromHi(e.series[m].codingTable),P={data_relative_timestamp:0,data:{}};if(g<=14){var E=e.series[m].uncompressSamples[e.series[m].uncompressSamples.length-1].data.value;if(g>0)P.data.value=d(a,E,e.series[m].codingType,r[m].resol,g);else{if(v){v=0;continue}P.data.value=E}}else P.data.value=a.getNextSample(r[m].sampletype);P.data_relative_timestamp=c[f],e.series[m].uncompressSamples.push(P)}}return l}(e,a,t,r,s,_):function(e,a,t,r,n,s){for(var _={},u=0;u<n.nb_of_type_measure;u++){_.lbl=a.getNextSample(4,s);var c=i(t,_),l=a.getNextSample(4,8);if(l)for(var p=a.getNextSample(4,2),v=0;v<l;v++){var m=e.series[c].uncompressSamples[e.series[c].uncompressSamples.length-1].data_relative_timestamp,f={data_relative_timestamp:0,data:{}},g=a.getNextBifromHi(p);if(f.data_relative_timestamp=o(a,m,g),f.data_relative_timestamp>r&&(r=f.data_relative_timestamp),(g=a.getNextBifromHi(e.series[c].codingTable))<=14){var P=e.series[c].uncompressSamples[e.series[c].uncompressSamples.length-1].data.value;f.data.value=g>0?d(a,P,e.series[c].codingType,t[c].resol,g):P}else f.data.value=a.getNextSample(t[c].sampletype);e.series[c].uncompressSamples.push(f)}}return r}(e,a,r,n,s,_)}(c,l,f,s,m,p,e)),c.batch_relative_timestamp=n(l,m),function(e,a,t){var r={batch_counter:e.batch_counter,batch_relative_timestamp:e.batch_relative_timestamp};return t&&(r.batch_absolute_timestamp=t),r.dataset=e.series.reduce((function(r,i,n){return r.concat(i.uncompressSamples.map((function(r){var i,o,s,d={data_relative_timestamp:r.data_relative_timestamp,data:{value:a[n].divide?r.data.value/a[n].divide:r.data.value,label:a[n].taglbl}};return a[n].lblname&&(d.data.label_name=a[n].lblname),t&&(d.data_absolute_timestamp=(i=t,o=e.batch_relative_timestamp,s=r.data_relative_timestamp,new Date(new Date(i).getTime()-1e3*(o-s)).toISOString())),d})))}),[]),r}(c,s,u)}(e.batch1,e.batch2,e.payload,s),u=[],c=0;c<_.dataset.length;c++){var l=_.dataset[c],p={variable:l.data.label_name,value:l.data.value,date:l.data_absolute_timestamp};u.push(p)}return u}}},174:function(e,a,t){var r=t(907),i=t(652);function n(e){var a,t=null==(a=e)?{}:Array.isArray(a)?{samples:a}:"object"==_typeof(a)?a:"string"==typeof a||"number"==typeof a?{value:a}:{};if(!t.samples||!Array.isArray(t.samples))return t;var r=t.samples,i={};r.forEach((function(e){if("object"==_typeof(e)&&e.variable&&void 0!==e.value&&e.date){var a=e.variable,t=e.value,r=e.date;(!i[a]||new Date(r)>new Date(i[a].date))&&(i[a]={value:t,date:r})}}));var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);for(var s in i)i.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=i[s].value);return n}e.exports={watteco_decodeUplink:function(e,a,t){e.bytes,e.fPort;var o=e.recvTime;try{var s=r.normalisation_standard(e,t),d=s.payload;if("batch"!==s.type)return{data:n(s.data),warnings:s.warning};var _={batch1:a[0],batch2:a[1],payload:d,date:o};try{return{data:n(i.normalisation_batch(_)),warnings:[]}}catch(e){return{errors:e.message,warnings:[]}}}catch(e){return{errors:e.message,warnings:[]}}}}},907:function(e){var a=function(){function e(a){var t;return _classCallCheck(this,e),(t=_callSuper(this,e,[a])).name="ValidationError",t}return _inherits(e,_wrapNativeSuper(Error)),_createClass(e)}(),t={16:{name:"boolean",size:1},8:{name:"general8",size:1},9:{name:"general16",size:2},10:{name:"general24",size:3},11:{name:"general32",size:4},24:{name:"bitmap8",size:1},25:{name:"bitmap16",size:2},32:{name:"uint8",size:1},33:{name:"uint16",size:2},34:{name:"uint24",size:3},35:{name:"uint32",size:4},40:{name:"int8",size:1},41:{name:"int16",size:2},43:{name:"int32",size:4},48:{name:"enum8",size:1},66:{name:"char string",size:1},65:{name:"bytes string",size:1},67:{name:"long bytes string",size:2},76:{name:"structured ordered sequence",size:2},57:{name:"single",size:4}},r={32778:{0:{0:{divider:1,function_type:"int",name:"positive_active_energy",size:4},1:{divider:1,function_type:"int",name:"negative_active_energy",size:4},2:{divider:1,function_type:"int",name:"positive_reactive_energy",size:4},3:{divider:1,function_type:"int",name:"negative_reactive_energy",size:4},4:{divider:1,function_type:"int",name:"positive_active_power",size:4},5:{divider:1,function_type:"int",name:"negative_active_power",size:4},6:{divider:1,function_type:"int",name:"positive_reactive_power",size:4},7:{divider:1,function_type:"int",name:"negative_reactive_power",size:4}}},32784:{0:{0:{divider:1,function_type:"int",name:"active_energy_a",size:4},1:{divider:1,function_type:"int",name:"reactive_energy_a",size:4},2:{divider:1,function_type:"int",name:"active_energy_b",size:4},3:{divider:1,function_type:"int",name:"reactive_energy_b",size:4},4:{divider:1,function_type:"int",name:"active_energy_c",size:4},5:{divider:1,function_type:"int",name:"reactive_energy_c",size:4},6:{divider:1,function_type:"int",name:"active_energy_abc",size:4},7:{divider:1,function_type:"int",name:"reactive_energy_abc",size:4}},1:{0:{divider:1,function_type:"int",name:"active_power_a",size:4},1:{divider:1,function_type:"int",name:"reactive_power_a",size:4},2:{divider:1,function_type:"int",name:"active_power_b",size:4},3:{divider:1,function_type:"int",name:"reactive_power_b",size:4},4:{divider:1,function_type:"int",name:"active_power_c",size:4},5:{divider:1,function_type:"int",name:"reactive_power_c",size:4},6:{divider:1,function_type:"int",name:"active_power_abc",size:4},7:{divider:1,function_type:"int",name:"reactive_power_abc",size:4}}},32779:{0:{0:{divider:10,function_type:"int",name:"Vrms",size:2},1:{divider:10,function_type:"int",name:"Irms",size:2},2:{divider:1,function_type:"int",name:"angle",size:2}}},32781:{0:{0:{divider:10,function_type:"int",name:"Vrms_a",size:2},1:{divider:10,function_type:"int",name:"Irms_a",size:2},2:{divider:1,function_type:"int",name:"angle_a",size:2},3:{divider:10,function_type:"int",name:"Vrms_b",size:2},4:{divider:10,function_type:"int",name:"Irms_b",size:2},5:{divider:1,function_type:"int",name:"angle_b",size:2},6:{divider:10,function_type:"int",name:"Vrms_c",size:2},7:{divider:10,function_type:"int",name:"Irms_c",size:2},8:{divider:1,function_type:"int",name:"angle_c",size:2}}},32850:{0:{0:{divider:1e3,function_type:"int",name:"frequency",size:2},1:{divider:1e3,function_type:"int",name:"frequency_min",size:2},2:{divider:1e3,function_type:"int",name:"frequency_max",size:2},3:{divider:10,function_type:"int",name:"Vrms",size:2},4:{divider:10,function_type:"int",name:"Vrms_min",size:2},5:{divider:10,function_type:"int",name:"Vrms_max",size:2},6:{divider:10,function_type:"int",name:"Vpeak",size:2},7:{divider:10,function_type:"int",name:"Vpeak_min",size:2},8:{divider:10,function_type:"int",name:"Vpeak_max",size:2},9:{divider:1,function_type:"int",name:"over_voltage",size:2},10:{divider:1,function_type:"int",name:"sag_voltage",size:2}}},32773:{0:{0:{divider:1,function_type:"none",name:"pin_state_1",size:1},1:{divider:1,function_type:"none",name:"pin_state_2",size:1},2:{divider:1,function_type:"none",name:"pin_state_3",size:1},3:{divider:1,function_type:"none",name:"pin_state_4",size:1},4:{divider:1,function_type:"none",name:"pin_state_5",size:1},5:{divider:1,function_type:"none",name:"pin_state_6",size:1},6:{divider:1,function_type:"none",name:"pin_state_7",size:1},7:{divider:1,function_type:"none",name:"pin_state_8",size:1},8:{divider:1,function_type:"none",name:"pin_state_9",size:1},9:{divider:1,function_type:"none",name:"pin_state_10",size:1}}},80:{6:{0:{divider:1e3,function_type:"none",name:"power_modes",size:2},1:{divider:1e3,function_type:"none",name:"current_power_source",size:2},2:{divider:1e3,function_type:"none",name:"constant_power",size:2},3:{divider:1e3,function_type:"none",name:"rechargeable_battery",size:2},4:{divider:1e3,function_type:"none",name:"disposable_battery",size:2},5:{divider:1e3,function_type:"none",name:"solar_harvesting",size:2},6:{divider:1e3,function_type:"none",name:"TIC_harvesting",size:2}}}};function i(e,a){return 2===a&&(32768&e)>0?e-=65536:3===a&&(8388608&e)>0?e-=16777216:4===a&&(2147483648&e)>0&&(e-=4294967296),e}function n(e){var a=2147483648&e?-1:1,t=(e>>23&255)-127,r=8388607&e;if(128===t)return a*(r?Number.NaN:Number.POSITIVE_INFINITY);if(-127===t){if(0===r)return 0;t=-126,r/=1<<23}else r=(r|1<<23)/(1<<23);return a*r*Math.pow(2,t)}function o(e,a,t,r){void 0===r&&(r=!1);var i,n,o="U"!=t.substr(0,1),s=parseInt(t.substr(1,2),10)/8,d=s;for(r?(i=-1,n=a+s-1):(i=1,n=a),tmpInt64=0,j=n;d>0;j+=i,d--)tmpInt64=(tmpInt64<<8)+e[j];return o&&s<8&&128&e[n]&&(tmpInt64-=1<<8*s),tmpInt64}function s(e,a){var t=e.toString(16).toUpperCase();for(a=null!=a?a:2;t.length<a;)t="0"+t;return"0x"+t}function d(e,a){for(var t=String(e);t.length<a;)t="0"+t;return t}function _(e){var a="";return a+=d(e.toString(2),8)}function u(e){return parseInt(e,2)}function c(e,a,t,r,i,n){for(var o=0;0===t;){var s=r[n+e*o];if(void 0===s){i.zclheader.alarmmsg=a,t=1;break}var d=_(s),c=4*u(d[5])+2*u(d[6])+u(d[7]),l=!0;if("0"===d[0]&&(l=!1),"1"===d[3]&&"0"===d[4]){var p="cause:{alarm:"+l+", criterion_index: "+c+", mode: threshold, crossing: "+("1"===d[1]?"exceed":"fall")+"}";a.push(p)}if("0"===d[3]&&"1"===d[4]){var v="cause:{alarm:"+l+", criterion_index: "+c+", mode: delta}";a.push(v)}o+=1}}function l(e,a,o,s,d,c,l,p,v,m,f,g){var P=t[v],E=f,b=0,h=P.size,S=P.name;void 0!==g&&(b=1,h=r[e][a][g].size),2===h?function(e,a,t,o,s,d,c,l,p,v,m,f){var g=0,P=0,E=0,b=0,h=0,S=0;1===v&&(e+=1,S=1),void 0===p&&(p="single"===l?"float":"int8"===l||"int16"===l||"int32"===l?"int":"none");var y=o[d+e*g];for(void 0===y&&(s.zclheader.alarmmsg=a,t=1);0===t;){if(1===v){var z=o[d+e*g+1+h];c=r[m][f][z].divider,p=r[m][f][z].function_type}var A=_(y),H=4*u(A[5])+2*u(A[6])+u(A[7]),C=!0;if("0"===A[0]&&(C=!1),"1"===A[3]&&"0"===A[4]){var T,N="",D="",I="";if(T="1"===A[1]?"exceed":"fall",0===S)"none"===p?(N=((256*o[d+1+e*g+h]+o[d+2+e*g+h])/c).toString(),I=((256*o[d+3+e*g+h]+o[d+4+e*g+h])/c).toString()):"int"===p?(N=i((256*o[d+1+e*g+h]+o[d+2+e*g+h])/c).toString(),I=i((256*o[d+3+e*g+h]+o[d+4+e*g+h])/c).toString()):"float"===p&&(N=n((256*o[d+1+e*g+h]+o[d+2+e*g]+h)/c).toString(),I=n((256*o[d+3+e*g+h]+o[d+4+e*g]+h)/c).toString()),(P=parseInt(_(o[d+5+e*g+h]),2))>=128?(E=parseInt(_(256*o[d+6+e*g+h]+o[d+7+e*g+h]),2),b=parseInt(_(256*o[d+8+e*g+h]+o[d+9+e*g+h]),2),h+=4,D="cause:{alarm:"+C+", criterion_index: "+H+", mode: threshold, crossing: "+T+", value: "+N+", gap: "+I+", occurences_up: "+E+", occurences_down: "+b+"}"):D="cause:{alarm:"+C+", criterion_index: "+H+", mode: threshold, crossing: "+T+", value: "+N+", gap: "+I+", occurences: "+P+"}";else{var R=o[d+e*g+1+h],U=r[m][f][R].name;"none"===p?(N=((256*o[d+2+e*g+h]+o[d+3+e*g+h])/c).toString(),I=((256*o[d+4+e*g+h]+o[d+5+e*g+h])/c).toString()):"int"===p?(N=i((256*o[d+2+e*g+h]+o[d+3+e*g+h])/c).toString(),I=i((256*o[d+4+e*g+h]+o[d+5+e*g+h])/c).toString()):"float"===p&&(N=n((256*o[d+2+e*g+h]+o[d+3+e*g+h])/c).toString(),I=n((256*o[d+4+e*g+h]+o[d+5+e*g+h])/c).toString()),(P=parseInt(_(o[d+6+e*g+h]),2))>=128?(E=parseInt(_(256*o[d+7+e*g+h]+o[d+8+e*g+h]),2),b=parseInt(_(256*o[d+9+e*g+h]+o[d+10+e*g+h]),2),h+=4,D="cause:{alarm:"+C+", criterion_index: "+H+", mode: threshold, crossing: "+T+", value: "+N+", gap: "+I+", occurences_up: "+E+", occurences_down: "+b+", field: "+U+"}"):D="cause:{alarm:"+C+", criterion_index: "+H+", mode: threshold, crossing: "+T+", value: "+N+", gap: "+I+", occurences: "+P+", field: "+U+"}"}a.push(D)}if("0"===A[3]&&"1"===A[4]){e-=3;var x="",w="";if(0===S)"none"===p?x=((256*o[d+1+e*g+h]+o[d+2+e*g+h])/c).toString():"int"===p?x=i((256*o[d+1+e*g+h]+o[d+2+e*g+h])/c).toString():"float"===p&&(x=n((256*o[d+1+e*g+h]+o[d+2+e*g+h])/c).toString()),w="cause:{alarm:"+C+", criterion_index: "+H+", mode: delta, value: "+x+"}";else{var M=o[d+e*g+1+h],O=r[m][f][M].name;"none"===p?x=((256*o[d+2+e*g+h]+o[d+3+e*g+h])/c).toString():"int"===p?x=i((256*o[d+2+e*g+h]+o[d+3+e*g+h])/c).toString():"float"===p&&(x=n((256*o[d+2+e*g+h]+o[d+3+e*g+h])/c).toString()),w="cause:{alarm:"+C+", criterion_index: "+H+", mode: delta, value: "+x+", field: "+O+"}"}a.push(w)}if(P=0,b=0,E=0,void 0===(y=o[d+e*(g+=1)+h])){s.zclheader.alarmmsg=a,t=1;break}}}(o,s,d,c,l,p,m,S,E,b,e,a):4===h?function(e,a,t,o,s,d,c,l,p,v,m,f){var g=0,P=0,E=0,b=0,h=0,S=0;1===v&&(e+=1,S=1),void 0===p&&(p="single"===l?"float":"int8"===l||"int16"===l||"int32"===l?"int":"none");var y=o[d+e*g];for(void 0===y&&(s.zclheader.alarmmsg=a,t=1);0===t;){if(1===v){var z=o[d+e*g+1+P];c=r[m][f][z].divider,p=r[m][f][z].function_type}var A=_(y),H=4*u(A[5])+2*u(A[6])+u(A[7]),C=!0;if("0"===A[0]&&(C=!1),"1"===A[3]&&"0"===A[4]){var T,N="",D="",I="";if(T="1"===A[1]?"exceed":"fall",0===S)"none"===p?(N=((256*o[d+1+e*g+P]*256*256+256*o[d+2+e*g+P]*256+256*o[d+3+e*g+P]+o[d+4+e*g+P])/c).toString(),I=((256*o[d+5+e*g+P]*256*256+256*o[d+6+e*g+P]*256+256*o[d+7+e*g+P]+o[d+8+e*g+P])/c).toString()):"int"===p?(N=i((256*o[d+1+e*g+P]*256*256+256*o[d+2+e*g+P]*256+256*o[d+3+e*g+P]+o[d+4+e*g+P])/c).toString(),I=i((256*o[d+5+e*g+P]*256*256+256*o[d+6+e*g+P]*256+256*o[d+7+e*g+P]+o[d+8+e*g+P])/c).toString()):"float"===p&&(N=n((256*o[d+1+e*g+P]*256*256+256*o[d+2+e*g+P]*256+256*o[d+3+e*g+P]+o[d+4+e*g+P])/c).toString(),I=n((256*o[d+5+e*g+P]*256*256+256*o[d+6+e*g+P]*256+256*o[d+7+e*g+P]+o[d+8+e*g+P])/c).toString()),(E=parseInt(_(o[d+9+e*g+P]),2))>=128?(b=parseInt(_(256*o[d+10+e*g+P]+o[d+11+e*g+P]),2),h=parseInt(_(256*o[d+12+e*g+P]+o[d+13+e*g+P]),2),P+=4,D="cause:{alarm:"+C+", criterion_index: "+H+", mode: threshold, crossing: "+T+", value: "+N+", gap: "+I+", occurences_up: "+b+", occurences_down: "+h+"}"):D="cause:{alarm:"+C+", criterion_index: "+H+", mode: threshold, crossing: "+T+", value: "+N+", gap: "+I+", occurences: "+E+"}";else{var R=o[d+e*g+1],U=r[m][f][R].name;"none"===p?(N=((256*o[d+2+e*g+P]*256*256+256*o[d+3+e*g+P]*256+256*o[d+4+e*g+P]+o[d+5+e*g+P])/c).toString(),I=((256*o[d+6+e*g+P]*256*256+256*o[d+7+e*g+P]*256+256*o[d+8+e*g+P]+o[d+9+e*g+P])/c).toString()):"int"===p?(N=i((256*o[d+2+e*g+P]*256*256+256*o[d+3+e*g+P]*256+256*o[d+4+e*g+P]+o[d+5+e*g+P])/c).toString(),I=i((256*o[d+6+e*g+P]*256*256+256*o[d+7+e*g+P]*256+256*o[d+8+e*g+P]+o[d+9+e*g+P])/c).toString()):"float"===p&&(N=n((256*o[d+2+e*g+P]*256*256+256*o[d+3+e*g+P]*256+256*o[d+4+e*g+P]+o[d+5+e*g+P])/c).toString(),I=n((256*o[d+6+e*g+P]*256*256+256*o[d+7+e*g+P]*256+256*o[d+8+e*g+P]+o[d+9+e*g+P])/c).toString()),(E=parseInt(_(o[d+10+e*g+P]),2))>=128?(b=parseInt(_(256*o[d+11+e*g+P]+o[d+12+e*g+P]),2),h=parseInt(_(256*o[d+13+e*g+P]+o[d+14+e*g+P]),2),P+=4,D="cause:{alarm:"+C+", criterion_index: "+H+", mode: threshold, crossing: "+T+", value: "+N+", gap: "+I+", occurences_up: "+b+", occurences_down: "+h+", field: "+U+"}"):D="cause:{alarm:"+C+", criterion_index: "+H+", mode: threshold, crossing: "+T+", value: "+N+", gap: "+I+", occurences: "+E+", field: "+U+"}"}a.push(D)}if("0"===A[3]&&"1"===A[4]){e-=3;var x="",w="";if(0===S)"none"===p?x=((256*o[d+1+e*g+P]*256*256+256*o[d+2+e*g+P]*256+256*o[d+3+e*g+P]+o[d+4+e*g+P])/c).toString():"int"===p?x=i((256*o[d+1+e*g+P]*256*256+256*o[d+2+e*g+P]*256+256*o[d+3+e*g+P]+o[d+4+e*g+P])/c).toString():"float"===p&&(x=n((256*o[d+1+e*g+P]*256*256+256*o[d+2+e*g+P]*256+256*o[d+3+e*g+P]+o[d+4+e*g+P])/c).toString()),w="cause:{alarm:"+C+", criterion_index: "+H+", mode: delta, value: "+x+"}";else{var M=o[d+e*g+1],O=r[m][f][M].name;"none"===p?x=((256*o[d+2+e*g+P]*256*256+256*o[d+3+e*g+P]*256+256*o[d+4+e*g+P]+o[d+5+e*g+P])/c).toString():"int"===p?x=i((256*o[d+2+e*g+P]*256*256+256*o[d+3+e*g+P]*256+256*o[d+4+e*g+P]+o[d+5+e*g+P])/c).toString():"float"===p&&(x=n((256*o[d+2+e*g+P]*256*256+256*o[d+3+e*g+P]*256+256*o[d+4+e*g+P]+o[d+5+e*g+P])/c).toString()),w="cause:{alarm:"+C+", criterion_index: "+H+", mode: delta, value: "+x+", field: "+O+"}"}a.push(w)}if(E=0,h=0,b=0,void 0===(y=o[d+e*(g+=1)+P])){s.zclheader.alarmmsg=a,t=1;break}}}(o,s,d,c,l,p,m,S,E,b,e,a):1===h?function(e,a,t,o,s,d,c,l,p,v,m,f){var g=0,P=0,E=0,b=0,h=0,S=0;1===v&&(e+=1,S=1),void 0===p&&(p="single"===l?"float":"int8"===l||"int16"===l||"int32"===l?"int":"none");var y=o[d+e*g];for(void 0===y&&(s.zclheader.alarmmsg=a,t=1);0===t;){if(1===v){var z=o[d+e*g+1+P];c=r[m][f][z].divider,p=r[m][f][z].function_type}var A=_(y),H=4*u(A[5])+2*u(A[6])+u(A[7]),C=!0;if("0"===A[0]&&(C=!1),"1"===A[3]&&"0"===A[4]){var T,N="",D="",I="";if(T="1"===A[1]?"exceed":"fall",0===S)"none"===p?(N=(o[d+1+e*g+P]/c).toString(),I=(o[d+2+e*g+P]/c).toString()):"int"===p?(N=i(o[d+1+e*g+P]/c).toString(),I=i(o[d+2+e*g+P]/c).toString()):"float"===p&&(N=n(o[d+1+e*g+P]/c).toString(),I=n(o[d+2+e*g+P]/c).toString()),(E=parseInt(_(o[d+3+e*g+P]),2))>=128?(b=parseInt(_(256*o[d+4+e*g+P]+o[d+5+e*g+P]),2),h=parseInt(_(256*o[d+6+e*g+P]+o[d+7+e*g+P]),2),P+=4,D="cause:{alarm:"+C+", criterion_index: "+H+", mode: threshold, crossing: "+T+", value: "+N+", gap: "+I+", occurences_up: "+b+", occurences_down: "+h+"}"):D="cause:{alarm:"+C+", criterion_index: "+H+", mode: threshold, crossing: "+T+", value: "+N+", gap: "+I+", occurences: "+E+"}";else{var R=o[d+e*g+1+P],U=r[m][f][R].name;"none"===p?(N=(o[d+2+e*g+P]/c).toString(),I=(o[d+3+e*g+P]/c).toString()):"int"===p?(N=i(o[d+2+e*g+P]/c).toString(),I=i(o[d+3+e*g+P]/c).toString()):"float"===p&&(N=n(o[d+2+e*g+P]/c).toString(),I=n(o[d+3+e*g+P]/c).toString()),(E=parseInt(_(o[d+4+e*g+P]),2))>=128?(b=parseInt(_(256*o[d+5+e*g+P]+o[d+6+e*g+P]),2),h=parseInt(_(256*o[d+7+e*g+P]+o[d+8+e*g+P]),2),P+=4,D="cause:{alarm:"+C+", criterion_index: "+H+", mode: threshold, crossing: "+T+", value: "+N+", gap: "+I+", occurences_up: "+b+", occurences_down: "+h+", field: "+U+"}"):D="cause:{alarm:"+C+", criterion_index: "+H+", mode: threshold, crossing: "+T+", value: "+N+", gap: "+I+", occurences: "+E+", field: "+U+"}"}a.push(D)}if("0"===A[3]&&"1"===A[4]){e-=3;var x="",w="";if(0===S)"none"===p?x=(o[d+1+e*g+P]/c).toString():"int"===p?x=i(o[d+1+e*g+P]/c).toString():"float"===p&&(x=n(o[d+1+e*g+P]/c).toString()),w="cause:{alarm:"+C+", criterion_index: "+H+", mode: delta, value: "+x+"}";else{var M=o[d+e*g+1+P],O=r[m][f][M].name;"none"===p?x=(o[d+2+e*g+P]/c).toString():"int"===p?x=i(o[d+2+e*g+P]/c).toString():"float"===p&&(x=n(o[d+2+e*g+P]/c).toString()),w="cause:{alarm:"+C+", criterion_index: "+H+", mode: delta, value: "+x+", field: "+O+"}"}a.push(w)}if(E=0,h=0,b=0,void 0===(y=o[d+e*(g+=1)+P])){s.zclheader.alarmmsg=a,t=1;break}}}(o,s,d,c,l,p,m,S,E,b,e,a):3===h&&function(e,a,t,o,s,d,c,l,p,v,m,f){var g=0,P=0,E=0,b=0,h=0,S=0;1===v&&(e+=1,S=1),void 0===p&&(p="single"===l?"float":"int8"===l||"int16"===l||"int32"===l?"int":"none");var y=o[d+e*g];for(void 0===y&&(s.zclheader.alarmmsg=a,t=1);0===t;){if(1===v){var z=o[d+e*g+1+P];c=r[m][f][z].divider,p=r[m][f][z].function_type}var A=_(y),H=4*u(A[5])+2*u(A[6])+u(A[7]),C=!0;if("0"===A[0]&&(C=!1),"1"===A[3]&&"0"===A[4]){var T,N="",D="",I="";if(T="1"===A[1]?"exceed":"fall",0===S)"none"===p?(N=((256*o[d+1+e*g+P]+o[d+2+e*g+P]+o[d+3+e*g+P])/c).toString(),I=((256*o[d+4+e*g+P]+o[d+5+e*g+P]+o[d+6+e*g+P])/c).toString()):"int"===p?(N=i((256*o[d+1+e*g+P]+o[d+2+e*g+P]+o[d+3+e*g+P])/c).toString(),I=i((256*o[d+4+e*g+P]+o[d+5+e*g+P]+o[d+6+e*g+P])/c).toString()):"float"===p&&(N=n((256*o[d+1+e*g+P]+o[d+2+e*g+P]+o[d+3+e*g+P])/c).toString(),I=n((256*o[d+4+e*g+P]+o[d+5+e*g+P]+o[d+6+e*g+P])/c).toString()),(E=parseInt(_(o[d+7+e*g+P]),2))>=128?(b=parseInt(_(256*o[d+8+e*g+P]+o[d+9+e*g+P]),2),h=parseInt(_(256*o[d+10+e*g+P]+o[d+11+e*g+P]),2),P+=4,D="cause:{alarm:"+C+", criterion_index: "+H+", mode: threshold, crossing: "+T+", value: "+N+", gap: "+I+", occurences_up: "+b+", occurences_down: "+h+"}"):D="cause:{alarm:"+C+", criterion_index: "+H+", mode: threshold, crossing: "+T+", value: "+N+", gap: "+I+", occurences: "+E+"}";else{var R=o[d+e*g+1+P],U=r[m][f][R].name;"none"===p?(N=((256*o[d+2+e*g+P]+o[d+3+e*g+P]+o[d+4+e*g+P])/c).toString(),I=((256*o[d+5+e*g+P]+o[d+6+e*g+P]+o[d+7+e*g+P])/c).toString()):"int"===p?(N=i((256*o[d+2+e*g+P]+o[d+3+e*g+P]+o[d+4+e*g+P])/c).toString(),I=i((256*o[d+5+e*g+P]+o[d+6+e*g+P]+o[d+7+e*g+P])/c).toString()):"float"===p&&(N=n((256*o[d+2+e*g+P]+o[d+3+e*g+P]+o[d+4+e*g+P])/c).toString(),I=n((256*o[d+5+e*g+P]+o[d+6+e*g+P]+o[d+7+e*g+P])/c).toString()),(E=parseInt(_(o[d+8+e*g+P]),2))>=128?(b=parseInt(_(256*o[d+9+e*g+P]+o[d+10+e*g+P]),2),h=parseInt(_(256*o[d+11+e*g+P]+o[d+12+e*g+P]),2),P+=4,D="cause:{alarm:"+C+", criterion_index: "+H+", mode: threshold, crossing: "+T+", value: "+N+", gap: "+I+", occurences_up: "+b+", occurences_down: "+h+", field: "+U+"}"):D="cause:{alarm:"+C+", criterion_index: "+H+", mode: threshold, crossing: "+T+", value: "+N+", gap: "+I+", occurences: "+E+", field: "+U+"}"}a.push(D)}if("0"===A[3]&&"1"===A[4]){e-=3;var x="",w="";if(0===S)"none"===p?x=((256*o[d+1+e*g+P]*256+256*o[d+2+e*g+P]+o[d+3+e*g+P])/c).toString():"int"===p?x=i((256*o[d+1+e*g+P]+o[d+2+e*g+P]+o[d+3+e*g+P])/c).toString():"float"===p&&(x=n((256*o[d+1+e*g+P]+o[d+2+e*g+P]+o[d+3+e*g+P])/c).toString()),w="cause:{alarm:"+C+", criterion_index: "+H+", mode: delta, value: "+x+"}";else{var M=o[d+e*g+1],O=r[m][f][M].name;"none"===p?x=((256*o[d+2+e*g+P]+o[d+3+e*g+P]+o[d+4+e*g+P])/c).toString():"int"===p?x=i((256*o[d+2+e*g+P]+o[d+3+e*g+P]+o[d+4+e*g+P])/c).toString():"float"===p&&(x=n((256*o[d+2+e*g+P]+o[d+3+e*g+P]+o[d+4+e*g+P])/c).toString()),w="cause:{alarm:"+C+", criterion_index: "+H+", mode: delta, value: "+x+", field: "+O+"}"}a.push(w)}if(E=0,h=0,b=0,void 0===(y=o[d+e*(g+=1)+P])){s.zclheader.alarmmsg=a,t=1;break}}}(o,s,d,c,l,p,m,S,E,b,e,a)}function p(e){for(var a="",t=0;t<e.length;t++){var r=e[t].toString(16).toUpperCase();1===r.length&&(r="0"+r),a+=r}return a}function v(e,t){var r={},u=0;r.lora={},r.lora.port=t;var v=e.length,m="";r.lora.payload="";for(var f=0;f<v;f++){1===(m=e[f].toString(16).toUpperCase()).length&&(m="0"+m),r.lora.payload+=m;var g=new Date;r.lora.date=g.toISOString()}if(125===t)if(0==!(1&e[0])){r.zclheader={},r.zclheader.report="standard";var P,E,b=-1;if(r.zclheader.endpoint=(224&e[0])>>5|(6&e[0])<<2,P=e[1],r.zclheader.cmdID=s(P,2),E=256*e[2]+e[3],r.zclheader.clustID=s(E,4),10===P||138===P||1===P){u=1,r.data={},b=256*e[4]+e[5],r.zclheader.attID=s(b,4);var h=e[4],S=0;if(10!==P&&138!==P||(S=7),138===P&&(r.zclheader.alarm=1),1===P&&(S=8,r.zclheader.status=e[6]),83!==E&&84!==E&&85!==E&&86!==E&&87!==E||(r.data=function(e,a,t){var r=["!?!","*",""," ACTIF","ACTIF","CONSO","CONTROLE","DEP","INACTIF","PROD","TEST","kVA","kW"],i=["!?!","*",""," ? ","000","HC","HCD","HCE","HCH","HH","HH ","HP","HP ","HPD","HPE","HPH","JA","JA ","P","P  ","PM","PM ","XXX"],s=["!?!","*","","BT 4 SUP36","BT 5 SUP36","HTA 5     ","HTA 8     ","TJ EJP    ","TJ EJP-HH ","TJ EJP-PM ","TJ EJP-SD ","TJ LU     ","TJ LU-CH  ","TJ LU-P   ","TJ LU-PH  ","TJ LU-SD  ","TJ MU     ","TV A5 BASE","TV A8 BASE","BASE","H PLEINE-CREUSE","HPHC","HC","HC et Week-End","EJP","PRODUCTEUR"],_=["!?!","*",""," ? ","000","HC","HCD","HCE","HCH","HH","HH ","HP","HP ","HPD","HPE","HPH","JA","JA ","P","P  ","PM","PM ","XXX","INDEX NON CONSO","BASE","HEURE CREUSE","HEURE PLEINE","HEURE NORMALE","HEURE POINTE","HC BLEU","BUHC","HP BLEU","BUHP","HC BLANC","BCHC","HP BLANC","BCHP","HC ROUGE","RHC","HP ROUGE","RHP","HEURE WEEK-END"],u=["!?!","*","","BT 4 SUP36","BT 5 SUP36","HTA 5     ","HTA 8     ","TJ EJP    ","TJ EJP-HH ","TJ EJP-PM ","TJ EJP-SD ","TJ LU     ","TJ LU-CH  ","TJ LU-P   ","TJ LU-PH  ","TJ LU-SD  ","TJ MU     ","TV A5 BASE","TV A8 BASE","BASE","H PLEINE-CREUSE","HPHC","HC","HC et Week-End","EJP","PRODUCTEUR"];function c(e,a,t){var r="";if(128&e[a]){var i=127&e[a];a+=1,i>0?(r=String.fromCharCode.apply(null,e.slice(a,a+i)),a+=i):r=""}else r=t[127&e[a]],a+=1;return{x:r,i:a}}function l(e,a){return{x:d(o(e,a,"U8"),2)+"/"+d(o(e,a+1,"U8"),2)+"/"+d(o(e,a+2,"U8"),2)+" "+d(o(e,a+3,"U8"),2)+":"+d(o(e,a+4,"U8"),2)+":"+d(o(e,a+5,"U8"),2),i:a+=6}}function v(e,a,t){var r=o(e,a,"U32",t);a+=4,r+=new Date("2000/01/01 00:00:00").getTime()/1e3,r+=3600;var i=new Date(1e3*r);return{x:d(i.getDate(),2)+"/"+d(i.getMonth(),2)+"/"+i.getFullYear()+" "+d(i.getHours(),2)+":"+d(i.getMinutes(),2)+":"+d(i.getSeconds(),2),i:a}}function m(e,a,t){return{x:String.fromCharCode.apply(null,e.slice(a,a+t)),i:a+=t}}function f(e,a){return{b:e,i:a}}function g(e,a){return function(e,a){var t=e.slice(a).indexOf(0);return{x:String.fromCharCode.apply(null,e.slice(a,a+t)),i:a+=t+1}}(e,a)}function P(e,a){return{x:o(e,a,"U8"),i:a+=1}}function E(e,a){return{x:o(e,a,"U16"),i:a+=2}}function b(e,a){return{x:o(e,a,"I16"),i:a+=2}}function h(e,a){return{x:o(e,a,"U24"),i:a+=3}}function S(e,a){var t={};for(a=1;a<=4;a++)t["Value_"+a]=o(e,a,"U24"),a+=3;return{x:t,i:a}}function y(e,a){return{x:o(e,a,"U32"),i:a+=4}}function z(e,a){return{x:ge=n(e),i:a+=4}}function A(e,a){return l(e,a)}function H(e,a){return v(e,a)}function C(e,a){return c(e,a,i)}function T(e,a){return{x:{},i:a=c(e,v(e,a).i,i).i}}function N(e,a){return{x:d(o(e,a,"U8"),2)+"/"+d(o(e,++a,"U8"),2)+" "+d(o(e,++a,"U8"),2),i:++a}}function D(e,a){var t={},r=m(e,a,1),i=l(e,r.i),n=o(e,a,"U8");return a=i.i+1,t.S=r.x,t.Date=i.x,t.Value=n,{x:t,i:a}}function I(e,a){var t={},r=m(e,a,1),i=l(e,r.i),n=o(e,a,"U16");return a=i.i+1,t.S=r.x,t.Date=i.x,t.Value=n,{x:t,i:a}}function R(e,a){var t={},r=m(e,a,1),i=l(e,r.i),n=o(e,a,"U24");return a=i.i+1,t.S=r.x,t.Date=i.x,t.Value=n,{x:t,i:a}}function U(e,a){return c(e,a,r)}function x(e,a){var t={},i=o(e,a,"U24");a+=3,t.Value=i;var n=c(e,a,r);return t.Label=n.x,{x:t,i:a=n.i}}function w(e,a){return c(e,a,s)}function M(e,a){for(var t=[],r=0;r<11;r++){var i={},n=d(o(e,a,"U8"),2);if(a++,255===n)i.Status="NONUTILE";else{var s=d(o(e,a,"U8"),2);a++;var _=p(e.slice(a,2));a++,i.Time=n+":"+s,i.Status=_,a+=e[a]+1}t.push(i)}return{x:t,i:a}}function O(e){return e}function F(e){return e}function J(e){return e}function B(e){return e}function V(e){return e}function X(e){return e}function G(e){return e}function q(e){return e}function k(e){return e}function L(e){return e}function Y(e){return e}function j(e){return e}function W(e){return e}function Z(e){return e}function K(e){return e}function Q(e){return e}function $(e){return e}function ee(e){return e}function ae(e){return e}function te(e){return e}function re(e){return e}var ie=[["CONTRAT",g,0,F],["DATECOUR",A,0,O],["DATE",A,0,O],["EA",h,0,function(e){return e}],["ERP",h,0,function(e){return e}],["PTCOUR",g,0,F],["PREAVIS",g,0,F],["MODE",f,0,F],["DATEPA1",A,0,O],["PA1",E,0,j],["DATEPA2",A,0,O],["PA2",E,0,j],["DATEPA3",A,0,O],["PA3",E,0,j],["DATEPA4",A,0,O],["PA4",E,0,j],["DATEPA5",A,0,O],["PA5",E,0,j],["DATEPA6",A,0,O],["PA6",E,0,j],["*p*",h,0,G],["KDC",P,0,Y],["KDCD",P,0,Y],["TGPHI",z,0,re],["PSP",E,0,j],["PSPM",E,0,j],["PSHPH",E,0,j],["PSHPD",E,0,j],["PSHCH",E,0,j],["PSHCD",E,0,j],["PSHPE",E,0,j],["PSHCE",E,0,j],["PSJA",E,0,j],["PSHH",E,0,j],["PSHD",E,0,j],["PSHM",E,0,j],["PSDSM",E,0,j],["PSSCM",E,0,j],["MODE",f,0,F],["PA1MN",E,0,j],["PA10MN",E,0,j],["PREA1MN",b,0,W],["PREA10MN",b,0,W],["TGPHI",z,0,re],["U10MN",E,0,function(e){return e}]],ne=[["DEBUTp",A,0,O,0],["FINp",A,0,O,6],["CAFp",E,0,X,12],["DATEEAp",A,0,O,14],["EApP",h,0,ee,20],["EApPM",h,0,ee,23],["EApHCE",h,0,ee,26],["EApHCH",h,0,ee,29],["EApHH",h,0,ee,32],["EApHCD",h,0,ee,35],["EApHD",h,0,ee,38],["EApJA",h,0,ee,41],["EApHPE",h,0,ee,44],["EApHPH",h,0,ee,47],["EApHPD",h,0,ee,50],["EApSCM",h,0,ee,53],["EApHM",h,0,ee,56],["EApDSM",h,0,ee,59],["DATEERPp",A,0,O,62],["ERPpP",h,0,te,68],["ERPpPM",h,0,te,71],["ERPpHCE",h,0,te,74],["ERPpHCH",h,0,te,77],["ERPpHH",h,0,te,80],["ERPpHCD",h,0,te,83],["ERPpHD",h,0,te,86],["ERPpJA",h,0,te,89],["ERPpHPE",h,0,te,92],["ERPpHPH",h,0,te,95],["ERPpHPD",h,0,te,98],["ERPpSCM",h,0,te,101],["ERPpHM",h,0,te,104],["ERPpDSM",h,0,te,107],["DATEERNp",A,0,O,110],["ERNpP",h,0,te,116],["ERNpPM",h,0,te,119],["ERNpHCE",h,0,te,122],["ERNpHCH",h,0,te,125],["ERNpHH",h,0,te,128],["ERNpHCD",h,0,te,131],["ERNpHD",h,0,te,134],["ERNpJA",h,0,te,137],["ERNpHPE",h,0,te,140],["ERNpHPH",h,0,te,143],["ERNpHPD",h,0,te,146],["ERNpSCM",h,0,te,149],["ERNpHM",h,0,te,152],["ERNpDSM",h,0,te,155]],oe=[["DEBUTp1",A,0,O,0],["FINp1",A,0,O,6],["CAFp1",E,0,X,12],["DATEEAp1",A,0,O,14],["EAp1P",h,0,ee,20],["EAp1PM",h,0,ee,23],["EAp1HCE",h,0,ee,26],["EAp1HCH",h,0,ee,29],["EAp1HH",h,0,ee,32],["EAp1HCD",h,0,ee,35],["EAp1HD",h,0,ee,38],["EAp1JA",h,0,ee,41],["EAp1HPE",h,0,ee,44],["EAp1HPH",h,0,ee,47],["EAp1HPD",h,0,ee,50],["EAp1SCM",h,0,ee,53],["EAp1HM",h,0,ee,56],["EAp1DSM",h,0,ee,59],["DATEERPp1",A,0,O,62],["ERPp1P",h,0,te,68],["ERPp1PM",h,0,te,71],["ERPp1HCE",h,0,te,74],["ERPp1HCH",h,0,te,77],["ERPp1HH",h,0,te,80],["ERPp1HCD",h,0,te,83],["ERPp1HD",h,0,te,86],["ERPp1JA",h,0,te,89],["ERPp1HPE",h,0,te,92],["ERPp1HPH",h,0,te,95],["ERPp1HPD",h,0,te,98],["ERPp1SCM",h,0,te,101],["ERPp1HM",h,0,te,104],["ERPp1DSM",h,0,te,107],["DATEERNp1",A,0,O,110],["ERNp1P",h,0,te,116],["ERNp1PM",h,0,te,119],["ERNp1HCE",h,0,te,122],["ERNp1HCH",h,0,te,125],["ERNp1HH",h,0,te,128],["ERNp1HCD",h,0,te,131],["ERNp1HD",h,0,te,134],["ERNp1JA",h,0,te,137],["ERNp1HPE",h,0,te,140],["ERNp1HPH",h,0,te,143],["ERNp1HPD",h,0,te,146],["ERNp1SCM",h,0,te,149],["ERNp1HM",h,0,te,152],["ERNp1DSM",h,0,te,155]],se=[["ADIR1",E,0,V],["ADIR2",E,0,V],["ADIR3",E,0,V],["ADCO",g,0,F],["OPTARIF",g,0,F],["ISOUSC",P,0,B],["BASE",y,0,L],["HCHC",y,0,L],["HCHP",y,0,L],["EJPHN",y,0,L],["EJPHPM",y,0,L],["BBRHCJB",y,0,L],["BBRHPJB",y,0,L],["BBRHCJW",y,0,L],["BBRHPJW",y,0,L],["BBRHCJR",y,0,L],["BBRHPJR",y,0,L],["PEJP",P,0,B],["GAZ",y,0,k],["AUTRE",y,0,k],["PTEC",g,0,F],["DEMAIN",g,0,F],["IINST",E,0,V],["IINST1",E,0,V],["IINST2",E,0,V],["IINST3",E,0,V],["ADPS",E,0,V],["IMAX",E,0,V],["IMAX1",E,0,V],["IMAX2",E,0,V],["IMAX3",E,0,V],["PMAX",y,0,G],["PAPP",y,0,G],["HHPHC",function(e,a){return{x:String.fromCharCode.apply(null,e.slice(0,1)),i:a+=1}},0,function(e){return e}],["MOTDETAT",g,0,F],["PPOT",P,0,function(e){return e}]],de=[["JAUNE",function(e,a){var t=d(o(e,a,"U8"),2),r=d(o(e,++a,"U8"),2);return{x:d(o(e,++a,"U8"),2)+"/"+d(o(e,++a,"U8"),2)+" "+t+":"+r,i:++a}},0,O],["JAUNE",g,0,F],["JAUNE",g,0,F],["JAUNE",h,0,G],["JAUNE",P,0,B],["ENERG",function(e,a){var t={};for(a=1;a<=4;a++)t["Value_"+a]=o(e,a,"U24"),a+=3;return{x:t,i:a}},0,q],["ENERG",h,0,q],["ENERG",h,0,q],["ENERG",h,0,q],["ENERG",h,0,q],["ENERG",h,0,q],["PERCC",N,0,O],["PERCC",P,0,B],["PMAXC",S,0,G],["PMAXC",h,0,G],["PMAXC",h,0,G],["PMAXC",h,0,G],["TDEPA",S,0,G],["TDEPA",h,0,G],["TDEPA",h,0,G],["TDEPA",h,0,G],["PERCP",N,0,O],["PERCP",P,0,B],["PMAXP",S,0,G],["PMAXP",h,0,G],["PMAXP",h,0,G],["PMAXP",h,0,G],["PSOUSC",S,0,G],["PSOUSC",h,0,G],["PSOUSC",h,0,G],["PSOUSC",h,0,G],["PSOUSP",S,0,G],["PSOUSP",h,0,G],["PSOUSP",h,0,G],["PSOUSP",h,0,G],["FCOU",function(e,a){return{x:d(o(e,a,"U8"),2)+":"+d(o(e,++a,"U8"),2),i:++a}},0,O],["FCOU",P,0,B]],_e=[["ADSC",g,0,F],["VTIC",P,0,B],["DATE",function(e,a){var t={},r=m(e,a,1),i=l(e,r.i);return t.S=r.x,t.Date=i.x,{x:t,i:a=i.i}},0,O],["NGTF",function(e,a){return c(e,a,u)},0,F],["LTARF",function(e,a){return c(e,a,_)},0,F],["EAST",y,0,L],["EASF01",y,0,L],["EASF02",y,0,L],["EASF03",y,0,L],["EASF04",y,0,L],["EASF05",y,0,L],["EASF06",y,0,L],["EASF07",y,0,L],["EASF08",y,0,L],["EASF09",y,0,L],["EASF10",y,0,L],["EASD01",y,0,L],["EASD02",y,0,L],["EASD03",y,0,L],["EASD04",y,0,L],["EAIT",y,0,L],["ERQ1",y,0,L],["ERQ2",y,0,L],["ERQ3",y,0,L],["ERQ4",y,0,L],["IRMS1",E,0,V],["IRMS2",E,0,V],["IRMS3",E,0,V],["URMS1",E,0,V],["URMS2",E,0,V],["URMS3",E,0,V],["PREF",P,0,B],["PCOUP",P,0,B],["SINSTS",h,0,G],["SINSTS1",h,0,G],["SINSTS2",h,0,G],["SINSTS3",h,0,G],["SMAXSN",R,0,G],["SMAXSN1",R,0,G],["SMAXSN2",R,0,G],["SMAXSN3",R,0,G],["SMAXSN?1",R,0,G],["SMAXSN1?1",R,0,G],["SMAXSN2?1",R,0,G],["SMAXSN3?1",R,0,G],["SINSTI",h,0,G],["SMAXIN",R,0,G],["SMAXIN-1",R,0,G],["CCASN",R,0,G],["CCASN?1",R,0,G],["CCAIN",R,0,G],["CCAIN?1",R,0,G],["UMOY1",I,0,V],["UMOY2",I,0,V],["UMOY3",I,0,V],["STGE",function(e,a){var t=p(e.slice(a,2));return a+=4,{x:t,i:a+=4}},0,O],["DPM1",D,0,B],["FPM1",D,0,B],["DPM2",D,0,B],["FPM2",D,0,B],["DPM3",D,0,B],["FPM3",D,0,B],["MSG1",g,0,F],["MSG2",g,0,F],["PRM",g,0,F],["RELAIS",function(e,a){return{x:o(e,a,"U8"),i:++a}},0,V],["NTARF",P,0,B],["NJOURF",P,0,B],["NJOURF+1",P,0,B],["PJOURF+1",M,0,O],["PPOINTE",M,0,O]],ue=[["TRAME",U,0,F],["ADS",function(e,a){return{x:p(e.slice(a+1,a+1+e[a])),i:a+=e[a]+1}},0,O],["MESURES1",w,0,F],["DATE",A,0,O],["EA_s",h,0,Z],["ER+_s",h,0,K],["ER-_s",h,0,K],["EAPP_s",h,0,Q],["EA_i",h,0,Z],["ER+_i",h,0,K],["ER-_i",h,0,K],["EAPP_i",h,0,Q],["PTCOUR1",C,0,F],["TARIFDYN",U,0,F],["ETATDYN1",C,0,F],["PREAVIS1",C,0,J],["TDYN1CD",T,0,O],["TDYN1CF",T,0,O],["TDYN1FD",T,0,O],["TDYN1FF",T,0,O],["MODE",U,0,F],["CONFIG",U,0,F],["DATEPA1",A,0,O],["PA1_s",E,0,j],["PA1_i",E,0,j],["DATEPA2",H,0,O],["PA2_s",E,0,j],["PA2_i",E,0,j],["DATEPA3",H,0,O],["PA3_s",E,0,j],["PA3_i",E,0,j],["DATEPA4",H,0,O],["PA4_s",E,0,j],["PA4_i",E,0,j],["DATEPA5",H,0,O],["PA5_s",E,0,j],["PA5_i",E,0,j],["DATEPA6",H,0,O],["PA6_s",E,0,j],["PA6_i",E,0,j],["DebP",H,0,O],["EAP_s",h,0,$],["EAP_i",h,0,$],["ER+P_s",h,0,ae],["ER-P_s",h,0,ae],["ER+P_i",h,0,ae],["ER-P_i",h,0,ae],["DebP-1",H,0,O],["FinP-1",H,0,O],["EaP-1_s",h,0,$],["EaP-1_i",h,0,$],["ER+P-1_s",h,0,ae],["ER-P-1_s",h,0,ae],["ER+P-1_i",h,0,ae],["ER-P-1_i",h,0,ae],["PS",x,0,O],["PREAVIS",U,0,F],["PA1MN",E,0,j],["PMAX_s",x,0,O],["PMAX_i",x,0,O],["TGPHI_s",z,0,re],["TGPHI_i",z,0,re],["MESURES2",w,0,F],["PTCOUR2",C,0,F],["ETATDYN2",C,0,F],["PREAVIS2",C,0,J],["TDYN2CD",T,0,O],["TDYN2CF",T,0,O],["TDYN2FD",T,0,O],["TDYN2FF",T,0,O],["DebP_2",H,0,O],["EaP_s2",h,0,$],["DebP-1_2",H,0,O],["FinP-1_2",H,0,O],["EaP-1_s2",h,0,$],["_DDMES1_",h,0,function(e){return e}]],ce=[],le={};if(83==e)if(!1&a)le=ie,ce._TICFrameType="ICE Generale";else if(!1&a)le=ne,ce._TICFrameType="ICE Periode P";else{if(!(!1&a))return ce;le=oe,ce._TICFrameType="ICE Periode P moins 1"}else if(84==e)le=se,ce._TICFrameType="CBE/Historique";else if(85==e)le=de,ce._TICFrameType="CJE";else if(86==e)le=_e,ce._TICFrameType="Standard";else{if(87!=e)return ce;le=ue,ce._TICFrameType="PMEPMI"}var pe=function(e){var a=[],t=e[0],r=31&t;if(0==r&&(r=8),32&t)for(var i=1;i<r;i++)a.push(e[i]);else for(var n=0,o=r;o>1;o--)for(var s=0;s<8;s++)e[o-1]>>s&1&&a.push(n),n++;return{DescSize:r,Indexes:a}}(t),ve=pe.DescSize,me=pe.Indexes,fe=t.slice(0,ve),ge={};128&~fe[0]||(ge.Obsolete=!0),ge.Bytes=p(fe),ge.Indexes=me,ce._Descriptor=ge;for(var Pe=ve,Ee=0;Ee<me.length;Ee++){var be=me[Ee],he=le[be][1](t,Pe);ce[le[be][0]]=le[be][3](he.x),Pe=he.i}return ce}(E,b,e.slice(S+1))),0===E&&2===b){r.data.firmware="";for(var y=0;y<3;y++)r.data.firmware+=String(e[S+y]),y<2&&(r.data.firmware+=".");var z=256*e[S+3]*256+256*e[S+4]+e[S+5];r.data.firmware+="."+z.toString()}if(0===E&&3===b){var A=e[S];r.data.kernel="";for(var H=0;H<A;H++)r.data.kernel+=String.fromCharCode(e[S+1+H])}if(0===E&&4===b){var C=e[S];r.data.manufacturer="";for(var T=0;T<C;T++)r.data.manufacturer+=String.fromCharCode(e[S+1+T])}if(0===E&&5===b){var N=e[S];r.data.model="";for(var D=0;D<N;D++)r.data.model+=String.fromCharCode(e[S+1+D])}if(0===E&&6===b){var I=e[S];r.data.date="";for(var R=0;R<I;R++)r.data.date+=String.fromCharCode(e[S+1+R])}if(0===E&&16===b){var U=e[S];r.data.position="";for(var x=0;x<U;x++)r.data.position+=String.fromCharCode(e[S+1+x])}if(0===E&&32769===b){var w=e[S];r.data.application_name="";for(var M=0;M<w;M++)r.data.application_name+=String.fromCharCode(e[S+1+M])}if(1026===E&&0===b){var O=e[S-1];r.data.temperature=i(256*e[S]+e[S+1],2)/100;var F=S+2;if(138===P||void 0!==e[F]){var J=[];138===P&&J.push("alarm triggered");var B=_(e[F]);F+=1,"0"===B[2]&&"0"===B[3]&&(r.zclheader.alarmmsg=J),"0"===B[2]&&"1"===B[3]&&c(1,J,0,e,r,F),"1"===B[2]&&"0"===B[3]&&l(E,b,6,J,0,e,r,F,O,100,"int")}}if(1026===E&&1===b&&(r.data.min_temperature=i(256*e[S]+e[S+1],2)/100),1026===E&&2===b&&(r.data.max_temperature=i(256*e[S]+e[S+1],2)/100),1029===E&&0===b){var V=e[S-1];r.data.humidity=(256*e[S]+e[S+1])/100;var X=S+2;if(138===P||void 0!==e[X]){var G=[];138===P&&G.push("alarm triggered");var q=_(e[X]);X+=1,"0"===q[2]&&"0"===q[3]&&(r.zclheader.alarmmsg=G),"0"===q[2]&&"1"===q[3]&&c(1,G,0,e,r,X),"1"===q[2]&&"0"===q[3]&&l(E,b,6,G,0,e,r,X,V,100,"none")}}if(1029===E&&1===b&&(r.data.min_humidity=(256*e[S]+e[S+1])/100),1029===E&&2===b&&(r.data.max_humidity=(256*e[S]+e[S+1])/100),15===E&&1026===b){var k=e[S-1];r.data.index=256*e[S]*256*256+256*e[S+1]*256+256*e[S+2]+e[S+3];var L=S+4;if(138===P||void 0!==e[L]){var Y=[];138===P&&Y.push("alarm triggered");var j=_(e[L]);L+=1,"0"===j[2]&&"0"===j[3]&&(r.zclheader.alarmmsg=Y),"0"===j[2]&&"1"===j[3]&&c(1,Y,0,e,r,L),"1"===j[2]&&"0"===j[3]&&l(E,b,10,Y,0,e,r,L,k,1,"none")}}if(15===E&&85===b){var W=e[S-1];r.data.pin_state=!!e[S];var Z=S+1;if(138===P||void 0!==e[Z]){var K=[];138===P&&K.push("alarm triggered");var Q=_(e[Z]);Z+=1,"0"===Q[2]&&"0"===Q[3]&&(r.zclheader.alarmmsg=K),"0"===Q[2]&&"1"===Q[3]&&c(1,K,0,e,r,Z),"1"===Q[2]&&"0"===Q[3]&&l(E,b,4,K,0,e,r,Z,W,1,"none")}}if(15===E&&84===b&&(0===e[S]&&(r.data.polarity="normal"),1===e[S]&&(r.data.polarity="reverse")),15===E&&1024===b&&(0===e[S]&&(r.data.edge_selection="none"),1===e[S]&&(r.data.edge_selection="falling edge"),2===e[S]&&(r.data.edge_selection="rising edge"),3===e[S]&&(r.data.edge_selection="both edges"),5===e[S]&&(r.data.edge_selection="polling and falling edge"),6===e[S]&&(r.data.edge_selection="polling and rising edge"),7===e[S]&&(r.data.edge_selection="polling and both edges")),15===E&&1025===b&&(r.data.debounce_period=e[S]),15===E&&1027===b&&(r.data.poll_period=e[S]),15===E&&1028===b&&(r.data.force_notify=e[S]),19===E&&85===b){var $=e[S-1];r.data.output_value=e[S];var ee=S+1;if(138===P||void 0!==e[ee]){var ae=[];138===P&&ae.push("alarm triggered");var te=_(e[ee]);ee+=1,"0"===te[2]&&"0"===te[3]&&(r.zclheader.alarmmsg=ae),"0"===te[2]&&"1"===te[3]&&c(1,ae,0,e,r,ee),"1"===te[2]&&"0"===te[3]&&l(E,b,4,ae,0,e,r,ee,$,1,"none")}}if(6===E&&0===b){var re=e[S];r.data.output=1===re?"ON":"OFF"}if(32776===E&&0===b){var ie=e[S-1];r.data.differential_pressure=256*e[S]+e[S+1];var ne=S+2;if(138===P||void 0!==e[ne]){var oe=[];138===P&&oe.push("alarm triggered");var se=_(e[ne]);ne+=1,"0"===se[2]&&"0"===se[3]&&(r.zclheader.alarmmsg=oe),"0"===se[2]&&"1"===se[3]&&c(1,oe,0,e,r,ne),"1"===se[2]&&"0"===se[3]&&l(E,b,6,oe,0,e,r,ne,ie,1,"none")}}if(32773===E&&0===b){var de=e[S-1];r.data.pin_state_1=!(1&~e[S+1]),r.data.pin_state_2=!(2&~e[S+1]),r.data.pin_state_3=!(4&~e[S+1]),r.data.pin_state_4=!(8&~e[S+1]),r.data.pin_state_5=!(16&~e[S+1]),r.data.pin_state_6=!(32&~e[S+1]),r.data.pin_state_7=!(64&~e[S+1]),r.data.pin_state_8=!(128&~e[S+1]),r.data.pin_state_9=!(1&~e[S]),r.data.pin_state_10=!(2&~e[S]);var _e=S+2;if(138===P||void 0!==e[_e]){var ue=[];138===P&&ue.push("alarm triggered");var ce=_(e[_e]);_e+=1,"0"===ce[2]&&"0"===ce[3]?r.zclheader.alarmmsg=ue:"0"===ce[2]&&"1"===ce[3]?c(1,ue,0,e,r,_e):"1"===ce[2]&&"0"===ce[3]&&l(E,b,4,ue,0,e,r,_e,de,100,"none")}}if(32774===E&&0===b&&(r.data.speed=256*e[S]*256+256*e[S+1]+e[S+2]),32774===E&&1===b&&(r.data.data_bit=e[S]),32774===E&&2===b&&(r.data.parity=e[S]),32774===E&&3===b&&(r.data.stop_bit=e[S]),12===E&&85===b){var le=e[S-1];r.data.analog=n(256*e[S]*256*256+256*e[S+1]*256+256*e[S+2]+e[S+3]);var pe=S+4;if(138===P||void 0!==e[pe]){var ve=[];138===P&&ve.push("alarm triggered");var me=_(e[pe]);pe+=1,"0"===me[2]&&"0"===me[3]&&(r.zclheader.alarmmsg=ve),"0"===me[2]&&"1"===me[3]&&c(1,ve,0,e,r,pe),"1"===me[2]&&"0"===me[3]&&l(E,b,10,ve,0,e,r,pe,le,1,"float")}}if(12===E&&256===b&&(5===e[S+1]&&(r.data.type="ppm"),255===e[S+1]&&0===e[S+3]&&(r.data.type="mA"),255===e[S+1]&&1===e[S+3]&&(r.data.type="mV")),12===E&&32771===b&&(r.data.power_duration=256*e[S]+e[S+1]),12===E&&32772===b){var fe={},ge=_(e[S]),Pe=_(e[S+1]),Ee=2*ge[0]+ge[1];0===Ee&&(fe.mode="idle"),1===Ee&&(fe.mode="chock"),2===Ee&&(fe.mode="click");var be=8*ge[2]+4*ge[3]+2*ge[4]+ge[5];0===be&&(fe.frequency="idle"),1===be&&(fe.frequency="1Hz"),2===be&&(fe.frequency="10Hz"),3===be&&(fe.frequency="25Hz"),4===be&&(fe.frequency="50Hz"),5===be&&(fe.frequency="100Hz"),6===be&&(fe.frequency="200Hz"),7===be&&(fe.frequency="400Hz"),8===be&&(fe.frequency="1620Hz"),9===be&&(fe.frequency="5376Hz"),fe.range={};var he=2*ge[6]+ge[7];0===he&&(fe.range.precision="+/- 2g",fe.range.value=16),1===he&&(fe.range.precision="+/- 4g",fe.range.value=32),2===he&&(fe.range.precision="+/- 8g",fe.range.value=64),3===he&&(fe.range.precision="+/- 16g",fe.range.value=128);var Se=128*Pe[0]+64*Pe[1]+32*Pe[2]+16*Pe[3]+8*Pe[4]+4*Pe[5]+2*Pe[6]+Pe[7];fe.threshold=Se*fe.range.value}if(32775===E&&1===b){r.data.modbus_payload="";for(var ye=e[S],ze=0;ze<ye;ze++)m=e[S+ze+1].toString(16).toUpperCase(),0===ze?r.data.modbus_slaveID=e[S+ze+1]:1===ze?r.data.modbus_fnctID=e[S+ze+1]:2===ze?r.data.modbus_datasize=e[S+ze+1]:r.data.modbus_payload+=m}if(32777===E&&0===b){var Ae=e[S+2],He=e[S+3];r.data.modbus_frame_series_sent=e[S+1],r.data.modbus_frame_number_in_serie=(224&Ae)>>5,r.data.modbus_last_frame_of_serie=(28&Ae)>>2,r.data.modbus_EP9=!(2&~Ae),r.data.modbus_EP8=!(1&~Ae),r.data.modbus_EP7=!(128&~He),r.data.modbus_EP6=!(64&~He),r.data.modbus_EP5=!(32&~He),r.data.modbus_EP4=!(16&~He),r.data.modbus_EP3=!(8&~He),r.data.modbus_EP2=!(4&~He),r.data.modbus_EP1=!(2&~He),r.data.modbus_EP0=!(1&~He);var Ce=S+4;if(!0===r.data.modbus_EP0){if(r.data.modbus_slaveID_EP0=e[Ce],r.data.modbus_fnctID_EP0=e[Ce+1],r.data.modbus_datasize_EP0=e[Ce+2],Ce+=3,r.data.modbus_payload_EP0="",void 0===e[Ce])return r;for(var Te=0;Te<r.data.modbus_datasize_EP0;Te++)1===(m=e[Ce+Te].toString(16).toUpperCase()).length&&(m="0"+m),r.data.modbus_payload_EP0+=m;Ce+=r.data.modbus_datasize_EP0}if(!0===r.data.modbus_EP1){if(r.data.modbus_slaveID_EP1=e[Ce],r.data.modbus_fnctID_EP1=e[Ce+1],r.data.modbus_datasize_EP1=e[Ce+2],Ce+=3,r.data.modbus_payload_EP1="",void 0===e[Ce])return r;for(var Ne=0;Ne<r.data.modbus_datasize_EP1;Ne++)1===(m=e[Ce+Ne].toString(16).toUpperCase()).length&&(m="0"+m),r.data.modbus_payload_EP1+=m;Ce+=r.data.modbus_datasize_EP1}if(!0===r.data.modbus_EP2){if(r.data.modbus_slaveID_EP2=e[Ce],r.data.modbus_fnctID_EP2=e[Ce+1],r.data.modbus_datasize_EP2=e[Ce+2],Ce+=3,r.data.modbus_payload_EP2="",void 0===e[Ce])return r;for(var De=0;De<r.data.modbus_datasize_EP2;De++)1===(m=e[Ce+De].toString(16).toUpperCase()).length&&(m="0"+m),r.data.modbus_payload_EP2+=m;Ce+=r.data.modbus_datasize_EP2}if(!0===r.data.modbus_EP3){if(r.data.modbus_slaveID_EP3=e[Ce],r.data.modbus_fnctID_EP3=e[Ce+1],r.data.modbus_datasize_EP3=e[Ce+2],Ce+=3,r.data.modbus_payload_EP3="",void 0===e[Ce])return r;for(var Ie=0;Ie<r.data.modbus_datasize_EP3;Ie++)1===(m=e[Ce+Ie].toString(16).toUpperCase()).length&&(m="0"+m),r.data.modbus_payload_EP3+=m;Ce+=r.data.modbus_datasize_EP3}if(!0===r.data.modbus_EP4){if(r.data.modbus_slaveID_EP4=e[Ce],r.data.modbus_fnctID_EP4=e[Ce+1],r.data.modbus_datasize_EP4=e[Ce+2],Ce+=3,r.data.modbus_payload_EP4="",void 0===e[Ce])return r;for(var Re=0;Re<r.data.modbus_datasize_EP4;Re++)1===(m=e[Ce+Re].toString(16).toUpperCase()).length&&(m="0"+m),r.data.modbus_payload_EP4+=m;Ce+=r.data.modbus_datasize_EP4}if(!0===r.data.modbus_EP5){if(r.data.modbus_slaveID_EP5=e[Ce],r.data.modbus_fnctID_EP5=e[Ce+1],r.data.modbus_datasize_EP5=e[Ce+2],Ce+=3,r.data.modbus_payload_EP5="",void 0===e[Ce])return r;for(var Ue=0;Ue<r.data.modbus_datasize_EP5;Ue++)1===(m=e[Ce+Ue].toString(16).toUpperCase()).length&&(m="0"+m),r.data.modbus_payload_EP5+=m;Ce+=r.data.modbus_datasize_EP5}if(!0===r.data.modbus_EP6){if(r.data.modbus_slaveID_EP6=e[Ce],r.data.modbus_fnctID_EP6=e[Ce+1],r.data.modbus_datasize_EP6=e[Ce+2],Ce+=3,r.data.modbus_payload_EP6="",void 0===e[Ce])return r;for(var xe=0;xe<r.data.modbus_datasize_EP6;xe++)1===(m=e[Ce+xe].toString(16).toUpperCase()).length&&(m="0"+m),r.data.modbus_payload_EP6+=m;Ce+=r.data.modbus_datasize_EP6}if(!0===r.data.modbus_EP7){if(r.data.modbus_slaveID_EP7=e[Ce],r.data.modbus_fnctID_EP7=e[Ce+1],r.data.modbus_datasize_EP7=e[Ce+2],Ce+=3,r.data.modbus_payload_EP7="",void 0===e[Ce])return r;for(var we=0;we<r.data.modbus_datasize_EP7;we++)1===(m=e[Ce+we].toString(16).toUpperCase()).length&&(m="0"+m),r.data.modbus_payload_EP7+=m;Ce+=r.data.modbus_datasize_EP7}if(!0===r.data.modbus_EP8){if(r.data.modbus_slaveID_EP8=e[Ce],r.data.modbus_fnctID_EP8=e[Ce+1],r.data.modbus_datasize_EP8=e[Ce+2],Ce+=3,r.data.modbus_payload_EP8="",void 0===e[Ce])return r;for(var Me=0;Me<r.data.modbus_datasize_EP8;Me++)1===(m=e[Ce+Me].toString(16).toUpperCase()).length&&(m="0"+m),r.data.modbus_payload_EP8+=m;Ce+=r.data.modbus_datasize_EP8}if(!0===r.data.modbus_EP9){if(r.data.modbus_slaveID_EP9=e[Ce],r.data.modbus_fnctID_EP9=e[Ce+1],r.data.modbus_datasize_EP9=e[Ce+2],Ce+=3,r.data.modbus_payload_EP9="",void 0===e[Ce])return r;for(var Oe=0;Oe<r.data.modbus_datasize_EP9;Oe++)1===(m=e[Ce+Oe].toString(16).toUpperCase()).length&&(m="0"+m),r.data.modbus_payload_EP9+=m;Ce+=r.data.modbus_datasize_EP9}}if(82===E&&0===b&&(r.data.active_energy=i(256*e[S+1]*256+256*e[S+2]+e[S+3],3),r.data.reactive_energy=i(256*e[S+4]*256+256*e[S+5]+e[S+6],3),r.data.nb_samples=256*e[S+7]+e[S+8],r.data.active_power=i(256*e[S+9]+e[S+10],2),r.data.reactive_power=i(256*e[S+11]+e[S+12],2)),32772===E&&0===b&&(1===e[S]&&(r.data.message_type="confirmed"),0===e[S]&&(r.data.message_type="unconfirmed")),32772===E&&1===b&&(r.data.nb_retry=e[S]),32772===E&&2===b&&(r.data.automatic_association={},r.data.automatic_association.period_in_minutes=256*e[S+1]+e[S+2],r.data.automatic_association.nb_err_frames=256*e[S+3]+e[S+4]),32772===E&&3===b&&(r.data.data_rate=e[S+2]),32772===E&&4===b){r.data.ABP_dev_address="";for(var Fe=0;Fe<4;Fe++)r.data.ABP_dev_address+=String(e[S+1+Fe]),Fe<3&&(r.data.ABP_dev_address+=".")}if(32772===E&&5===b){r.data.OTA_app_EUI="";for(var Je=0;Je<8;Je++)r.data.OTA_app_EUI+=String(e[S+1+Je]),Je<7&&(r.data.OTA_app_EUI+=".")}if(80===E&&4===b){e[S],e[S+1];for(var Be={},Ve=e[S+2],Xe=0;Xe<Ve;Xe++){var Ge={};Ge.endpoint=e[S+3+7*Xe];var qe=e[S+4+7*Xe];Ge.input_clusters=[];for(var ke=0;ke<qe;ke++)Ge.input_clusters[ke]=s(256*e[S+5+7*Xe+2*ke]+e[S+6+7*Xe+2*ke],4);var Le=e[S+5+7*Xe+2*qe];Ge.output_clusters=[];for(var Ye=0;Ye<Le;Ye++)Ge.output_clusters[Ye]=s(256*e[S+6+7*Xe+2*Ye]+e[S+7+7*Xe+2*Ye],4);Be[Xe]=Ge}r.data.configuration=Be}if(80===E&&6===b){var je=S+3,We=e[S-1];1&~e[S+2]||(r.data.main_or_external_voltage=(256*e[je]+e[je+1])/1e3,je+=2),2&~e[S+2]||(r.data.rechargeable_battery_voltage=(256*e[je]+e[je+1])/1e3,je+=2),4&~e[S+2]||(r.data.disposable_battery_voltage=(256*e[je]+e[je+1])/1e3,je+=2),8&~e[S+2]||(r.data.solar_harvesting_voltage=(256*e[je]+e[je+1])/1e3,je+=2),16&~e[S+2]||(r.data.tic_harvesting_voltage=(256*e[je]+e[je+1])/1e3,je+=2);var Ze=je+1;if(138===P||void 0!==e[Ze]){var Ke=[];138===P&&Ke.push("alarm triggered");var Qe=_(e[Ze]),$e=e[(Ze+=1)+1];"0"===Qe[2]&&"0"===Qe[3]&&(r.zclheader.alarmmsg=Ke),"0"===Qe[2]&&"1"===Qe[3]&&c(1,Ke,0,e,r,Ze),"1"===Qe[2]&&"0"===Qe[3]&&l(E,b,6,Ke,0,e,r,Ze,We,1e3,"multistate",$e)}}if(80===E&&255===h){var ea="action "+e[5].toString();r.data[ea]="";for(var aa=e[S+1],ta="none",ra=0;ra<aa;ra++)ta+=String.fromCharCode(e[S+1+ra]);r.data[ea]=ta}if(32778===E&&0===b){var ia=S,na=e[ia-1];r.data.positive_active_energy=i(256*e[ia+1]*256*256+256*e[ia+2]*256+256*e[ia+3]+e[ia+4],4),ia+=4,r.data.negative_active_energy=i(256*e[ia+1]*256*256+256*e[ia+2]*256+256*e[ia+3]+e[ia+4],4),ia+=4,r.data.positive_reactive_energy=i(256*e[ia+1]*256*256+256*e[ia+2]*256+256*e[ia+3]+e[ia+4],4),ia+=4,r.data.negative_reactive_energy=i(256*e[ia+1]*256*256+256*e[ia+2]*256+256*e[ia+3]+e[ia+4],4),ia+=4,r.data.positive_active_power=i(256*e[ia+1]*256*256+256*e[ia+2]*256+256*e[ia+3]+e[ia+4],4),ia+=4,r.data.negative_active_power=i(256*e[ia+1]*256*256+256*e[ia+2]*256+256*e[ia+3]+e[ia+4],4),ia+=4,r.data.positive_reactive_power=i(256*e[ia+1]*256*256+256*e[ia+2]*256+256*e[ia+3]+e[ia+4],4),ia+=4,r.data.negative_reactive_power=i(256*e[ia+1]*256*256+256*e[ia+2]*256+256*e[ia+3]+e[ia+4],4);var oa=ia+5;if(138===P||void 0!==e[oa]){var sa=[];138===P&&sa.push("alarm triggered");var da=_(e[oa]),_a=e[(oa+=1)+1];"0"===da[2]&&"0"===da[3]&&(r.zclheader.alarmmsg=sa),"0"===da[2]&&"1"===da[3]&&c(1,sa,0,e,r,oa),"1"===da[2]&&"0"===da[3]&&l(E,b,10,sa,0,e,r,oa,na,1,"multistate",_a)}}if(32784===E&&0===b){var ua=e[S-1];r.data.active_energy_a=i(256*e[S+1]*256*256+256*e[S+2]*256+256*e[S+3]+e[S+4]),r.data.reactive_energy_a=i(256*e[S+5]*256*256+256*e[S+6]*256+256*e[S+7]+e[S+8]),r.data.active_energy_b=i(256*e[S+9]*256*256+256*e[S+10]*256+256*e[S+11]+e[S+12]),r.data.reactive_energy_b=i(256*e[S+13]*256*256+256*e[S+14]*256+256*e[S+15]+e[S+16]),r.data.active_energy_c=i(256*e[S+17]*256*256+256*e[S+18]*256+256*e[S+19]+e[S+20]),r.data.reactive_energy_c=i(256*e[S+21]*256*256+256*e[S+22]*256+256*e[S+23]+e[S+24]),r.data.active_energy_abc=i(256*e[S+25]*256*256+256*e[S+26]*256+256*e[S+27]+e[S+28]),r.data.reactive_energy_abc=i(256*e[S+29]*256*256+256*e[S+30]*256+256*e[S+31]+e[S+32]);var ca=S+33;if(138===P||void 0!==e[ca]){var la=[];138===P&&la.push("alarm triggered");var pa=_(e[ca]),va=e[(ca+=1)+1];"0"===pa[2]&&"0"===pa[3]&&(r.zclheader.alarmmsg=la),"0"===pa[2]&&"1"===pa[3]&&c(1,la,0,e,r,ca),"1"===pa[2]&&"0"===pa[3]&&l(E,b,10,la,0,e,r,ca,ua,1,"multistate",va)}}else if(32784===E&&1===b){var ma=e[S-1];r.data.active_power_a=i(256*e[S+1]*256*256+256*e[S+2]*256+256*e[S+3]+e[S+4]),r.data.reactive_power_a=i(256*e[S+5]*256*256+256*e[S+6]*256+256*e[S+7]+e[S+8]),r.data.active_power_b=i(256*e[S+9]*256*256+256*e[S+10]*256+256*e[S+11]+e[S+12]),r.data.reactive_power_b=i(256*e[S+13]*256*256+256*e[S+14]*256+256*e[S+15]+e[S+16]),r.data.active_power_c=i(256*e[S+17]*256*256+256*e[S+18]*256+256*e[S+19]+e[S+20]),r.data.reactive_power_c=i(256*e[S+21]*256*256+256*e[S+22]*256+256*e[S+23]+e[S+24]),r.data.active_power_abc=i(256*e[S+25]*256*256+256*e[S+26]*256+256*e[S+27]+e[S+28]),r.data.reactive_power_abc=i(256*e[S+29]*256*256+256*e[S+30]*256+256*e[S+31]+e[S+32]);var fa=S+33;if(138===P||void 0!==e[fa]){var ga=[];138===P&&ga.push("alarm triggered");var Pa=_(e[fa]),Ea=e[(fa+=1)+1];"0"===Pa[2]&&"0"===Pa[3]&&(r.zclheader.alarmmsg=ga),"0"===Pa[2]&&"1"===Pa[3]&&c(1,ga,0,e,r,fa),"1"===Pa[2]&&"0"===Pa[3]&&l(E,b,10,ga,0,e,r,fa,ma,1,"multistate",Ea)}}if(32779===E&&0===b){var ba=S,ha=e[ba-1];r.data.Vrms=i(256*e[ba+1]+e[ba+2],2)/10,ba+=2,r.data.Irms=i(256*e[ba+1]+e[ba+2],2)/10,ba+=2,r.data.angle=i(256*e[ba+1]+e[ba+2],2);var Sa=ba+3;if(138===P||void 0!==e[Sa]){var ya=[];138===P&&ya.push("alarm triggered");var za=_(e[Sa]),Aa=e[(Sa+=1)+1];"0"===za[2]&&"0"===za[3]&&(r.zclheader.alarmmsg=ya),"0"===za[2]&&"1"===za[3]&&c(1,ya,0,e,r,Sa),"1"===za[2]&&"0"===za[3]&&l(E,b,6,ya,0,e,r,Sa,ha,1,"multistate",Aa)}}if(32781===E&&0===b){var Ha=e[S-1];r.data.Vrms_a=i(256*e[S+1]+e[S+2],2)/10,r.data.Irms_a=i(256*e[S+3]+e[S+4],2)/10,r.data.angle_a=i(256*e[S+5]+e[S+6],2),r.data.Vrms_b=i(256*e[S+7]+e[S+8],2)/10,r.data.Irms_b=i(256*e[S+9]+e[S+10],2)/10,r.data.angle_b=i(256*e[S+11]+e[S+12],2),r.data.Vrms_c=i(256*e[S+13]+e[S+14],2)/10,r.data.Irms_c=i(256*e[S+15]+e[S+16],2)/10,r.data.angle_c=i(256*e[S+17]+e[S+18],2);var Ca=S+19;if(138===P||void 0!==e[Ca]){var Ta=[];138===P&&Ta.push("alarm triggered");var Na=_(e[Ca]),Da=e[(Ca+=1)+1];"0"===Na[2]&&"0"===Na[3]&&(r.zclheader.alarmmsg=Ta),"0"===Na[2]&&"1"===Na[3]&&c(1,Ta,0,e,r,Ca),"1"===Na[2]&&"0"===Na[3]&&l(E,b,6,Ta,0,e,r,Ca,Ha,1,"multistate",Da)}}if(32780===E&&0===b){var Ia=e[S-1];r.data.concentration=256*e[S]+e[S+1];var Ra=S+2;if(138===P||void 0!==e[Ra]){var Ua=[];138===P&&Ua.push("alarm triggered");var xa=_(e[Ra]);Ra+=1,"0"===xa[2]&&"0"===xa[3]&&(r.zclheader.alarmmsg=Ua),"0"===xa[2]&&"1"===xa[3]&&c(1,Ua,0,e,r,Ra),"1"===xa[2]&&"0"===xa[3]&&l(E,b,6,Ua,0,e,r,Ra,Ia,1,"none")}}if(32780===E&&1===b&&(r.data.analog=e[S]),32780===E&&2===b&&(r.data.analog=e[S]),1024===E&&0===b){var wa=e[S-1];r.data.illuminance=256*e[S]+e[S+1];var Ma=S+2;if(138===P||void 0!==e[Ma]){var Oa=[];138===P&&Oa.push("alarm triggered");var Fa=_(e[Ma]);Ma+=1,"0"===Fa[2]&&"0"===Fa[3]&&(r.zclheader.alarmmsg=Oa),"0"===Fa[2]&&"1"===Fa[3]&&c(1,Oa,0,e,r,Ma),"1"===Fa[2]&&"0"===Fa[3]&&l(E,b,6,Oa,0,e,r,Ma,wa,1,"none")}}if(1027===E&&0===b){var Ja=e[S-1];r.data.pressure=i(256*e[S]+e[S+1],2);var Ba=S+2;if(138===P||void 0!==e[Ba]){var Va=[];138===P&&Va.push("alarm triggered");var Xa=_(e[Ba]);Ba+=1,"0"===Xa[2]&&"0"===Xa[3]&&(r.zclheader.alarmmsg=Va),"0"===Xa[2]&&"1"===Xa[3]&&c(1,Va,0,e,r,Ba),"1"===Xa[2]&&"0"===Xa[3]&&l(E,b,6,Va,0,e,r,Ba,Ja,1,"int")}}if(1030===E&&0===b){var Ga=e[S-1];r.data.occupancy=!!e[S];var qa=S+1;if(138===P||void 0!==e[qa]){var ka=[];138===P&&ka.push("alarm triggered");var La=_(e[qa]);qa+=1,"0"===La[2]&&"0"===La[3]&&(r.zclheader.alarmmsg=ka),"0"===La[2]&&"1"===La[3]&&c(1,ka,0,e,r,qa),"1"===La[2]&&"0"===La[3]&&l(E,b,4,ka,0,e,r,qa,Ga,1,"none")}}if(32850===E&&0===b){var Ya=S;r.data.frequency=(i(256*e[Ya+1]+e[Ya+2],2)+22232)/1e3,Ya+=2,r.data.frequency_min=(i(256*e[Ya+1]+e[Ya+2],2)+22232)/1e3,Ya+=2,r.data.frequency_max=(i(256*e[Ya+1]+e[Ya+2],2)+22232)/1e3,Ya+=2,r.data.Vrms=i(256*e[Ya+1]+e[Ya+2],2)/10,Ya+=2,r.data.Vrms_min=i(256*e[Ya+1]+e[Ya+2],2)/10,Ya+=2,r.data.Vrms_max=i(256*e[Ya+1]+e[Ya+2],2)/10,Ya+=2,r.data.Vpeak=i(256*e[Ya+1]+e[Ya+2],2)/10,Ya+=2,r.data.Vpeak_min=i(256*e[Ya+1]+e[Ya+2],2)/10,Ya+=2,r.data.Vpeak_max=i(256*e[Ya+1]+e[Ya+2],2)/10,Ya+=2,r.data.over_voltage=i(256*e[Ya+1]+e[Ya+2],2),Ya+=2,r.data.sag_voltage=i(256*e[Ya+1]+e[Ya+2],2)}if(32783===E){var ja=S+1;if(0===b){var Wa=r.data.last={};Wa.NbTriggedAcq=o(e,ja,"U32"),ja+=4,Wa.Mean_X_G=o(e,ja,"U16")/100,ja+=2,Wa.Max_X_G=o(e,ja,"U16")/100,ja+=2,Wa.Dt_X_ms=o(e,ja,"U16"),ja+=2,Wa.Mean_Y_G=o(e,ja,"U16")/100,ja+=2,Wa.Max_Y_G=o(e,ja,"U16")/100,ja+=2,Wa.Dt_Y_ms=o(e,ja,"U16"),ja+=2,Wa.Mean_Z_G=o(e,ja,"U16")/100,ja+=2,Wa.Max_Z_G=o(e,ja,"U16")/100,ja+=2,Wa.Dt_Z_ms=o(e,ja,"U16")}else if(1===b||2===b||3===b){var Za=1===b?"Stats_X":2===b?"Stats_Y":"Stats_Z",Ka=r.data[Za]={};Ka.NbAcq=o(e,ja,"U16"),ja+=2,Ka.MinMean_G=o(e,ja,"U16")/100,ja+=2,Ka.MinMax_G=o(e,ja,"U16")/100,ja+=2,Ka.MinDt=o(e,ja,"U16"),ja+=2,Ka.MeanMean_G=o(e,ja,"U16")/100,ja+=2,Ka.MeanMax_G=o(e,ja,"U16")/100,ja+=2,Ka.MeanDt=o(e,ja,"U16"),ja+=2,Ka.MaxMean_G=o(e,ja,"U16")/100,ja+=2,Ka.MaxMax_G=o(e,ja,"U16")/100,ja+=2,Ka.MaxDt=o(e,ja,"U16"),ja+=2}else if(32768===b){var Qa=r.data.params={};Qa.WaitFreq_Hz=o(e,ja,"U16")/10,ja+=2,Qa.AcqFreq_Hz=o(e,ja,"U16")/10;var $a=o(e,ja+=2,"U16");ja+=2,32768&$a&&($a=60*(-32769&$a)),Qa.NewWaitDelay_s=32768&$a?$a=60*(-32769&$a):$a,Qa.MaxAcqDuration_ms=o(e,ja,"U16"),ja+=2,Qa.Threshold_X_G=o(e,ja,"U16")/100,ja+=2,Qa.Threshold_Y_G=o(e,ja,"U16")/100,ja+=2,Qa.Threshold_Z_G=o(e,ja,"U16")/100,ja+=2,Qa.OverThrsh_Dt_ms=o(e,ja,"U16"),ja+=2,Qa.UnderThrsh_Dt_ms=o(e,ja,"U16"),ja+=2,Qa.Range_G=o(e,ja,"U16")/100,ja+=2,Qa.FilterSmoothCoef=o(e,ja,"U8"),ja+=1,Qa.FilterGainCoef=o(e,ja,"U8"),ja+=1,(Qa=r.data.Params.working_modes={}).SignalEachAcq=128&e[ja]?"true":"false",Qa.RstAftStdRpt_X=1&e[ja]?"true":"false",Qa.RstAftStdRpt_Y=2&e[ja]?"true":"false",Qa.RstAftStdRpt_7=4&e[ja]?"true":"false"}}var et=Object.keys(r.data)[0];if(void 0===r.data[et])throw new a("bad payload");if(e.length<=7)throw new a("bad payload")}if(7===P){u=1,b=256*e[6]+e[7],r.zclheader.attID=s(b,4),r.zclheader.status=e[4],r.zclheader.report_parameters={};var at=_(e[5]);r.zclheader.report_parameters.new_mode_configuration=at[0],"0"===at[2]&&"0"===at[3]&&(r.zclheader.report_parameters.cause_request="none"),"0"===at[2]&&"1"===at[3]&&(r.zclheader.report_parameters.cause_request="short"),"1"===at[2]&&"0"===at[3]&&(r.zclheader.report_parameters.cause_request="long"),"1"===at[2]&&"1"===at[3]&&(r.zclheader.report_parameters.cause_request="reserved"),r.zclheader.report_parameters.secured_if_alarm=at[4],r.zclheader.report_parameters.secured=at[5],r.zclheader.report_parameters.no_hearde_port=at[6],r.zclheader.report_parameters.batch=at[7]}if(9===P){u=1,b=256*e[6]+e[7],r.zclheader.attID=s(b,4),r.zclheader.status=e[4],r.zclheader.report_parameters={};var tt=_(e[5]);if(r.zclheader.report_parameters.new_mode_configuration=tt[0],"0"===tt[2]&&"0"===tt[3]&&(r.zclheader.report_parameters.cause_request="none"),"0"===tt[2]&&"1"===tt[3]&&(r.zclheader.report_parameters.cause_request="short"),"1"===tt[2]&&"0"===tt[3]&&(r.zclheader.report_parameters.cause_request="long"),"1"===tt[2]&&"1"===tt[3]&&(r.zclheader.report_parameters.cause_request="reserved"),r.zclheader.report_parameters.secured_if_alarm=tt[4],r.zclheader.report_parameters.secured=tt[5],r.zclheader.report_parameters.no_hearde_port=tt[6],r.zclheader.report_parameters.batch=tt[7],r.zclheader.attribut_type=e[8],r.zclheader.min={},128&~e[9]?(r.zclheader.min.value=256*e[9]+e[10],r.zclheader.min.unit="seconds"):(r.zclheader.min.value=256*(e[9]-128)+e[10],r.zclheader.min.unit="minutes"),r.zclheader.max={},128&~e[11]?(r.zclheader.max.value=256*e[11]+e[12],r.zclheader.max.unit="seconds"):(r.zclheader.max.value=256*(e[11]-128)+e[12],r.zclheader.max.unit="minutes"),r.lora.payload="",80===E&&6===b)for(var rt=e[13]/5,it=0;rt>0;)r.zclheader.modepower=e[14+5*it],r.zclheader.powersource=e[15+5*it],r.zclheader.delta=256*e[16+5*it]+e[17+5*it],r.zclheader.changedpowersource=e[18+5*it],it++,rt--}if(0===u)throw new a("bad payload")}else r.batch={},r.batch.report="batch";return r}e.exports={normalisation_standard:function(e,t){var r=[],i=e.bytes,n=v(i,e.fPort);if(void 0!==n.zclheader){if(void 0!==n.zclheader.alarmmsg&&(r=n.zclheader.alarmmsg),7===i[1])return{data:n.zclheader,warning:r};if(9===i[1])return{data:n.zclheader,warning:r};if(1===i[1]){if(void 0===n.zclheader.data){for(var o=[],s=!0,d=0;s;){var _=Object.keys(n.data)[d];if(void 0===_){s=!1;break}o.push({variable:_,value:n.data[_],date:e.recvTime}),d++}return{data:o,type:"standard",warning:r}}return{data:{variable:"read reporting configuration response status",value:n.zclheader.data,date:e.recvTime},warning:r}}}if(void 0!==n.zclheader){if(void 0!==t){for(var u=n.zclheader.endpoint,c=!0,l=0,p=[],m="";c;){var f=Object.keys(n.data)[l];if(void 0===f){c=!1;break}void 0===t[f]?p.push({variable:f,value:n.data[f],date:e.recvTime}):"NA"===(m=t[f][u])?p.push({variable:m,value:"NA",date:e.recvTime}):p.push({variable:m,value:n.data[f],date:e.recvTime}),l++}return{data:p,type:"standard",warning:r}}throw new a("bad decoding")}return{type:n.batch.report,payload:n.lora.payload}}}}},a={};function t(r){var i=a[r];if(void 0!==i)return i.exports;var n=a[r]={exports:{}};return e[r](n,n.exports,t),n.exports}var r={};(function(){var e=r,a=t(174),i=[],n={positive_active_energy:["positive_active_energy_a","positive_active_energy_b","positive_active_energy_c","positive_active_energy_abc"],negative_active_energy:["negative_active_energy_a","negative_active_energy_b","negative_active_energy_c","negative_active_energy_abc"],positive_reactive_energy:["positive_reactive_energy_a","positive_reactive_energy_b","positive_reactive_energy_c","positive_reactive_energy_abc"],negative_reactive_energy:["negative_reactive_energy_a","negative_reactive_energy_b","negative_reactive_energy_c","negative_reactive_energy_abc"],positive_active_power:["positive_active_power_a","positive_active_power_b","positive_active_power_c","positive_active_power_abc"],negative_active_power:["negative_active_power_a","negative_active_power_b","negative_active_power_c","negative_active_power_abc"],positive_reactive_power:["positive_reactive_power_a","positive_reactive_power_b","positive_reactive_power_c","positive_reactive_power_abc"],negative_reactive_power:["negative_reactive_power_a","negative_reactive_power_b","negative_reactive_power_c","negative_reactive_power_abc"],Vrms:["Vrms_a","Vrms_b","Vrms_c"],Irms:["Irms_a","Irms_b","Irms_c"],angle:["angle_a","angle_b","angle_c"]};e.decodeUplink=function(e){return a.watteco_decodeUplink(e,i,n)}})(),driver=r}(),"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports&&(exports.driver=driver);