var driver;(()=>{var e={652:e=>{const t=[];t[0]=0,t[1]=1,t[2]=4,t[3]=4,t[4]=8,t[5]=8,t[6]=16,t[7]=16,t[8]=24,t[9]=24,t[10]=32,t[11]=32,t[12]=32;const a=[[{sz:2,lbl:0},{sz:2,lbl:1},{sz:2,lbl:3},{sz:3,lbl:5},{sz:4,lbl:9},{sz:5,lbl:17},{sz:6,lbl:33},{sz:7,lbl:65},{sz:8,lbl:129},{sz:10,lbl:512},{sz:11,lbl:1026},{sz:11,lbl:1027},{sz:11,lbl:1028},{sz:11,lbl:1029},{sz:11,lbl:1030},{sz:11,lbl:1031}],[{sz:7,lbl:111},{sz:5,lbl:26},{sz:4,lbl:12},{sz:3,lbl:3},{sz:3,lbl:7},{sz:2,lbl:2},{sz:2,lbl:0},{sz:3,lbl:2},{sz:6,lbl:54},{sz:9,lbl:443},{sz:9,lbl:441},{sz:10,lbl:885},{sz:10,lbl:884},{sz:10,lbl:880},{sz:11,lbl:1763},{sz:11,lbl:1762}],[{sz:4,lbl:9},{sz:3,lbl:5},{sz:2,lbl:0},{sz:2,lbl:1},{sz:2,lbl:3},{sz:5,lbl:17},{sz:6,lbl:33},{sz:7,lbl:65},{sz:8,lbl:129},{sz:10,lbl:512},{sz:11,lbl:1026},{sz:11,lbl:1027},{sz:11,lbl:1028},{sz:11,lbl:1029},{sz:11,lbl:1030},{sz:11,lbl:1031}]];function n(e,t,a,n){return{uncompressSamples:[{data_relative_timestamp:n,data:{value:s(e,t),label:a}}],codingType:0,codingTable:0,resolution:null}}function i(e,t){for(let a=0;a<e.length;a++)if(e[a].taglbl===t.lbl)return a;throw new Error("Batch : Cannot find i1 in argList")}function r(e,t){if(t){let a=e.getNextBifromHi(1);return o(e,t,a)}return e.getNextSample(10)}function o(e,t,a){return a>14?e.getNextSample(10):a>0?function(e,t,a){return e.getNextSample(10,a)+t+Math.pow(2,a)-1}(e,t,a):t}function s(e,t){let a=e.getNextSample(t);return 12===t?function(e){let t=2147483648&e?-1:1,a=(e>>23&255)-127,n=8388607&e;if(128===a)return t*(n?Number.NaN:Number.POSITIVE_INFINITY);if(-127===a){if(0===n)return 0*t;a=-126,n/=1<<22}else n=(n|1<<23)/(1<<23);return t*n*Math.pow(2,a)}(a):a}function d(e,t,a,n,i){let r=e.getNextSample(6,i);return 0===a?function(e,t,a,n){return e>=Math.pow(2,n-1)?e*t+a:(e+1-Math.pow(2,n))*t+a}(r,n,t,i):1===a?(r+Math.pow(2,i)-1)*n+t:t-(r+(Math.pow(2,i)-1))*n}Math.trunc=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)},e.exports={normalisation_batch:function(e){let s=e.date,l=function(e,s,l,_){const c=function(){let e=[],t=0;for(;t<16;)e.push({codingType:0,codingTable:0,resolution:null,uncompressSamples:[]}),t+=1;return{batch_counter:0,batch_relative_timestamp:0,series:e}}(),u=function(e){function n(e,t,a){let n=t,i=a-1;if(8*e.length<n+a)throw new Error("Batch : Verify that dest buf is large enough");let r=0,o=0;for(;a>0;)e[n>>3]&1<<(7&n)&&(o|=1<<i-r),a--,r++,n++;return o}return{i1:0,byteArray:e,getNextSample:function(e,a){let n=a||t[e],i=this.i1;if(this.i1+=n,12===e&&32!==n)throw new Error("Batch : Mauvais sampletype");let r=0,o=Math.trunc((n-1)/8)+1,s=n%8;for(0===s&&o>0&&(s=8);o>0;){let e=0;for(;s>0;){let t=i>>3;this.byteArray[t]&1<<(7&i)&&(r|=1<<8*(o-1)+e),s--,e++,i+=1}o--,s=8}if((3==e||5==e||7==e||9==e)&&r&1<<n-1)for(let e=n;e<32;e++)r|=1<<e,n++;return r},getNextBifromHi:function(e){for(let t=2;t<12;t++){let i=n(this.byteArray,this.i1,t);for(let n=0;n<a[e].length;n++)if(a[e][n].sz==t&&i==a[e][n].lbl)return this.i1+=t,n}throw new Error("Bi not found in HUFF table")}}}(function(e){for(var t=[];e.length>=2;)t.push(parseInt(e.substring(0,2),16)),e=e.substring(2,e.length);return t}(l)),p=function(e){let t=e.toString(2);for(;t.length<8;)t="0"+t;return{isCommonTimestamp:parseInt(t[t.length-2],2),hasSample:!parseInt(t[t.length-3],2),batch_req:parseInt(t[t.length-4],2),nb_of_type_measure:parseInt(t.substring(0,4),2)}}(u.getNextSample(4));c.batch_counter=u.getNextSample(4,3),u.getNextSample(4,1);let m=function(e,t,a,o,s){let d=0,l=0;for(let _=0;_<o.nb_of_type_measure;_++){let c={size:s,lbl:t.getNextSample(4,s)},u=i(a,c);0===_&&(l=u),d=r(t,d),e.series[u]=n(t,a[u].sampletype,c.lbl,d),o.hasSample&&(e.series[u].codingType=t.getNextSample(4,2),e.series[u].codingTable=t.getNextSample(4,2))}return{last_timestamp:d,i1_of_the_first_sample:l}}(c,u,s,p,e),f=m.last_timestamp,g=m.i1_of_the_first_sample;return p.hasSample&&(f=function(e,t,a,n,r,s,l){return s.isCommonTimestamp?function(e,t,a,n,r,o){let s=t.getNextSample(4,8),l={},_=function(e,t,a,n){let i=[],r=0,o=t.getNextSample(4,2);for(let s=0;s<a;s++){let a=t.getNextBifromHi(o);if(a<=14)if(0===s)i.push(e.series[n].uncompressSamples[0].data_relative_timestamp);else{const e=i[s-1];a>0?i.push(t.getNextSample(10,a)+e+Math.pow(2,a)-1):i.push(e)}else i.push(t.getNextSample(10));r=i[s]}return{timestampCommon:i,lastTimestamp:r}}(e,t,s,a),c=_.timestampCommon,u=_.lastTimestamp;for(let a=0;a<r.nb_of_type_measure;a++){let a=1;l.lbl=t.getNextSample(4,o);let r=i(n,l);for(let i=0;i<s;i++)if(t.getNextSample(4,1)){let o=t.getNextBifromHi(e.series[r].codingTable),s={data_relative_timestamp:0,data:{}};if(o<=14){let i=e.series[r].uncompressSamples[e.series[r].uncompressSamples.length-1].data.value;if(o>0)s.data.value=d(t,i,e.series[r].codingType,n[r].resol,o);else{if(a){a=0;continue}s.data.value=i}}else s.data.value=t.getNextSample(n[r].sampletype);s.data_relative_timestamp=c[i],e.series[r].uncompressSamples.push(s)}}return u}(e,t,a,n,s,l):function(e,t,a,n,r,s){let l={};for(let _=0;_<r.nb_of_type_measure;_++){l.lbl=t.getNextSample(4,s);let r=i(a,l),_=t.getNextSample(4,8);if(_){let i=t.getNextSample(4,2);for(let s=0;s<_;s++){let s=e.series[r].uncompressSamples[e.series[r].uncompressSamples.length-1].data_relative_timestamp,l={data_relative_timestamp:0,data:{}},_=t.getNextBifromHi(i);if(l.data_relative_timestamp=o(t,s,_),l.data_relative_timestamp>n&&(n=l.data_relative_timestamp),_=t.getNextBifromHi(e.series[r].codingTable),_<=14){let n=e.series[r].uncompressSamples[e.series[r].uncompressSamples.length-1].data.value;l.data.value=_>0?d(t,n,e.series[r].codingType,a[r].resol,_):n}else l.data.value=t.getNextSample(a[r].sampletype);e.series[r].uncompressSamples.push(l)}}}return n}(e,t,n,r,s,l)}(c,u,g,s,f,p,e)),c.batch_relative_timestamp=r(u,f),function(e,t,a){let n={batch_counter:e.batch_counter,batch_relative_timestamp:e.batch_relative_timestamp};return a&&(n.batch_absolute_timestamp=a),n.dataset=e.series.reduce((function(n,i,r){return n.concat(i.uncompressSamples.map((function(n){let i={data_relative_timestamp:n.data_relative_timestamp,data:{value:t[r].divide?n.data.value/t[r].divide:n.data.value,label:t[r].taglbl}};var o,s,d;return t[r].lblname&&(i.data.label_name=t[r].lblname),a&&(i.data_absolute_timestamp=(o=a,s=e.batch_relative_timestamp,d=n.data_relative_timestamp,new Date(new Date(o).getTime()-1e3*(s-d)).toISOString())),i})))}),[]),n}(c,s,_)}(e.batch1,e.batch2,e.payload,s),_=[];for(let e=0;e<l.dataset.length;e++){let t=l.dataset[e],a={variable:t.data.label_name,value:t.data.value,date:t.data_absolute_timestamp};_.push(a)}return _}}},174:(e,t,a)=>{const n=a(907),i=a(652);function r(e){const t=null==(a=e)?{}:Array.isArray(a)?{samples:a}:"object"==typeof a?a:"string"==typeof a||"number"==typeof a?{value:a}:{};var a;if(!t.samples||!Array.isArray(t.samples))return t;const n=t.samples,i={};n.forEach((e=>{if("object"==typeof e&&e.variable&&void 0!==e.value&&e.date){const{variable:t,value:a,date:n}=e;(!i[t]||new Date(n)>new Date(i[t].date))&&(i[t]={value:a,date:n})}}));const r={};for(let e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);for(let e in i)i.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(r[e]=i[e].value);return r}e.exports={watteco_decodeUplink:function(e,t,a){e.bytes,e.fPort;let o=e.recvTime;try{let s=n.normalisation_standard(e,a),d=s.payload;if("batch"!==s.type)return{data:r(s.data),warnings:s.warning};{let e={batch1:t[0],batch2:t[1],payload:d,date:o};try{return{data:r(i.normalisation_batch(e)),warnings:[]}}catch(e){return{errors:e.message,warnings:[]}}}}catch(e){return{errors:e.message,warnings:[]}}}}},907:e=>{class t extends Error{constructor(e){super(e),this.name="ValidationError"}}const a={16:{name:"boolean",size:1},8:{name:"general8",size:1},9:{name:"general16",size:2},10:{name:"general24",size:3},11:{name:"general32",size:4},24:{name:"bitmap8",size:1},25:{name:"bitmap16",size:2},32:{name:"uint8",size:1},33:{name:"uint16",size:2},34:{name:"uint24",size:3},35:{name:"uint32",size:4},40:{name:"int8",size:1},41:{name:"int16",size:2},43:{name:"int32",size:4},48:{name:"enum8",size:1},66:{name:"char string",size:1},65:{name:"bytes string",size:1},67:{name:"long bytes string",size:2},76:{name:"structured ordered sequence",size:2},57:{name:"single",size:4}},n={32778:{0:{0:{divider:1,function_type:"int",name:"positive_active_energy",size:4},1:{divider:1,function_type:"int",name:"negative_active_energy",size:4},2:{divider:1,function_type:"int",name:"positive_reactive_energy",size:4},3:{divider:1,function_type:"int",name:"negative_reactive_energy",size:4},4:{divider:1,function_type:"int",name:"positive_active_power",size:4},5:{divider:1,function_type:"int",name:"negative_active_power",size:4},6:{divider:1,function_type:"int",name:"positive_reactive_power",size:4},7:{divider:1,function_type:"int",name:"negative_reactive_power",size:4}}},32784:{0:{0:{divider:1,function_type:"int",name:"active_energy_a",size:4},1:{divider:1,function_type:"int",name:"reactive_energy_a",size:4},2:{divider:1,function_type:"int",name:"active_energy_b",size:4},3:{divider:1,function_type:"int",name:"reactive_energy_b",size:4},4:{divider:1,function_type:"int",name:"active_energy_c",size:4},5:{divider:1,function_type:"int",name:"reactive_energy_c",size:4},6:{divider:1,function_type:"int",name:"active_energy_abc",size:4},7:{divider:1,function_type:"int",name:"reactive_energy_abc",size:4}},1:{0:{divider:1,function_type:"int",name:"active_power_a",size:4},1:{divider:1,function_type:"int",name:"reactive_power_a",size:4},2:{divider:1,function_type:"int",name:"active_power_b",size:4},3:{divider:1,function_type:"int",name:"reactive_power_b",size:4},4:{divider:1,function_type:"int",name:"active_power_c",size:4},5:{divider:1,function_type:"int",name:"reactive_power_c",size:4},6:{divider:1,function_type:"int",name:"active_power_abc",size:4},7:{divider:1,function_type:"int",name:"reactive_power_abc",size:4}}},32779:{0:{0:{divider:10,function_type:"int",name:"Vrms",size:2},1:{divider:10,function_type:"int",name:"Irms",size:2},2:{divider:1,function_type:"int",name:"angle",size:2}}},32781:{0:{0:{divider:10,function_type:"int",name:"Vrms_a",size:2},1:{divider:10,function_type:"int",name:"Irms_a",size:2},2:{divider:1,function_type:"int",name:"angle_a",size:2},3:{divider:10,function_type:"int",name:"Vrms_b",size:2},4:{divider:10,function_type:"int",name:"Irms_b",size:2},5:{divider:1,function_type:"int",name:"angle_b",size:2},6:{divider:10,function_type:"int",name:"Vrms_c",size:2},7:{divider:10,function_type:"int",name:"Irms_c",size:2},8:{divider:1,function_type:"int",name:"angle_c",size:2}}},32850:{0:{0:{divider:1e3,function_type:"int",name:"frequency",size:2},1:{divider:1e3,function_type:"int",name:"frequency_min",size:2},2:{divider:1e3,function_type:"int",name:"frequency_max",size:2},3:{divider:10,function_type:"int",name:"Vrms",size:2},4:{divider:10,function_type:"int",name:"Vrms_min",size:2},5:{divider:10,function_type:"int",name:"Vrms_max",size:2},6:{divider:10,function_type:"int",name:"Vpeak",size:2},7:{divider:10,function_type:"int",name:"Vpeak_min",size:2},8:{divider:10,function_type:"int",name:"Vpeak_max",size:2},9:{divider:1,function_type:"int",name:"over_voltage",size:2},10:{divider:1,function_type:"int",name:"sag_voltage",size:2}}},32773:{0:{0:{divider:1,function_type:"none",name:"pin_state_1",size:1},1:{divider:1,function_type:"none",name:"pin_state_2",size:1},2:{divider:1,function_type:"none",name:"pin_state_3",size:1},3:{divider:1,function_type:"none",name:"pin_state_4",size:1},4:{divider:1,function_type:"none",name:"pin_state_5",size:1},5:{divider:1,function_type:"none",name:"pin_state_6",size:1},6:{divider:1,function_type:"none",name:"pin_state_7",size:1},7:{divider:1,function_type:"none",name:"pin_state_8",size:1},8:{divider:1,function_type:"none",name:"pin_state_9",size:1},9:{divider:1,function_type:"none",name:"pin_state_10",size:1}}},80:{6:{0:{divider:1e3,function_type:"none",name:"power_modes",size:2},1:{divider:1e3,function_type:"none",name:"current_power_source",size:2},2:{divider:1e3,function_type:"none",name:"constant_power",size:2},3:{divider:1e3,function_type:"none",name:"rechargeable_battery",size:2},4:{divider:1e3,function_type:"none",name:"disposable_battery",size:2},5:{divider:1e3,function_type:"none",name:"solar_harvesting",size:2},6:{divider:1e3,function_type:"none",name:"TIC_harvesting",size:2}}}};function i(e,t){return 2===t&&(32768&e)>0?e-=65536:3===t&&(8388608&e)>0?e-=16777216:4===t&&(2147483648&e)>0&&(e-=4294967296),e}function r(e){const t=2147483648&e?-1:1;let a=(e>>23&255)-127,n=8388607&e;if(128===a)return t*(n?Number.NaN:Number.POSITIVE_INFINITY);if(-127===a){if(0===n)return 0;a=-126,n/=1<<23}else n=(n|1<<23)/(1<<23);return t*n*Math.pow(2,a)}function o(e,t,a,n){void 0===n&&(n=!1);const i="U"!=a.substr(0,1),r=parseInt(a.substr(1,2),10)/8;let o,s,d=r;for(n?(o=-1,s=t+r-1):(o=1,s=t),tmpInt64=0,j=s;d>0;j+=o,d--)tmpInt64=(tmpInt64<<8)+e[j];return i&&r<8&&128&e[s]&&(tmpInt64-=1<<8*r),tmpInt64}function s(e,t){let a=e.toString(16).toUpperCase();for(t=t??2;a.length<t;)a="0"+a;return"0x"+a}function d(e,t){let a=String(e);for(;a.length<t;)a="0"+a;return a}function l(e){let t="";return t+=d(e.toString(2),8),t}function _(e){return parseInt(e,2)}function c(e,t,a,n,i,r){let o=0;for(;0===a;){let s=n[r+e*o];if(void 0===s){i.zclheader.alarmmsg=t,a=1;break}let d=l(s),c=4*_(d[5])+2*_(d[6])+_(d[7]),u=!0;if("0"===d[0]&&(u=!1),"1"===d[3]&&"0"===d[4]){let e="";e="1"===d[1]?"exceed":"fall";let a="cause:{alarm:"+u+", criterion_index: "+c+", mode: threshold, crossing: "+e+"}";t.push(a)}if("0"===d[3]&&"1"===d[4]){let e="cause:{alarm:"+u+", criterion_index: "+c+", mode: delta}";t.push(e)}o+=1}}function u(e,t,o,s,d,c,u,p,m,f,g,v){let E=a[m],P=g,S=0,b=E.size,h=E.name;void 0!==v&&(S=1,b=n[e][t][v].size),2===b?function(e,t,a,o,s,d,c,u,p,m,f,g){let v=0,E=0,P=0,S=0,b=0,h=0;1===m&&(e+=1,h=1),void 0===p&&(p="single"===u?"float":"int8"===u||"int16"===u||"int32"===u?"int":"none");let z=o[d+e*v];for(void 0===z&&(s.zclheader.alarmmsg=t,a=1);0===a;){if(1===m){let t=o[d+e*v+1+b];c=n[f][g][t].divider,p=n[f][g][t].function_type}let u=l(z),y=4*_(u[5])+2*_(u[6])+_(u[7]),A=!0;if("0"===u[0]&&(A=!1),"1"===u[3]&&"0"===u[4]){let a="",s="",_="",m="";if(m="1"===u[1]?"exceed":"fall",0===h)"none"===p?(a=((256*o[d+1+e*v+b]+o[d+2+e*v+b])/c).toString(),_=((256*o[d+3+e*v+b]+o[d+4+e*v+b])/c).toString()):"int"===p?(a=i((256*o[d+1+e*v+b]+o[d+2+e*v+b])/c).toString(),_=i((256*o[d+3+e*v+b]+o[d+4+e*v+b])/c).toString()):"float"===p&&(a=r((256*o[d+1+e*v+b]+o[d+2+e*v]+b)/c).toString(),_=r((256*o[d+3+e*v+b]+o[d+4+e*v]+b)/c).toString()),E=parseInt(l(o[d+5+e*v+b]),2),E>=128?(P=parseInt(l(256*o[d+6+e*v+b]+o[d+7+e*v+b]),2),S=parseInt(l(256*o[d+8+e*v+b]+o[d+9+e*v+b]),2),b+=4,s="cause:{alarm:"+A+", criterion_index: "+y+", mode: threshold, crossing: "+m+", value: "+a+", gap: "+_+", occurences_up: "+P+", occurences_down: "+S+"}"):s="cause:{alarm:"+A+", criterion_index: "+y+", mode: threshold, crossing: "+m+", value: "+a+", gap: "+_+", occurences: "+E+"}";else{let t=o[d+e*v+1+b],u=n[f][g][t].name;"none"===p?(a=((256*o[d+2+e*v+b]+o[d+3+e*v+b])/c).toString(),_=((256*o[d+4+e*v+b]+o[d+5+e*v+b])/c).toString()):"int"===p?(a=i((256*o[d+2+e*v+b]+o[d+3+e*v+b])/c).toString(),_=i((256*o[d+4+e*v+b]+o[d+5+e*v+b])/c).toString()):"float"===p&&(a=r((256*o[d+2+e*v+b]+o[d+3+e*v+b])/c).toString(),_=r((256*o[d+4+e*v+b]+o[d+5+e*v+b])/c).toString()),E=parseInt(l(o[d+6+e*v+b]),2),E>=128?(P=parseInt(l(256*o[d+7+e*v+b]+o[d+8+e*v+b]),2),S=parseInt(l(256*o[d+9+e*v+b]+o[d+10+e*v+b]),2),b+=4,s="cause:{alarm:"+A+", criterion_index: "+y+", mode: threshold, crossing: "+m+", value: "+a+", gap: "+_+", occurences_up: "+P+", occurences_down: "+S+", field: "+u+"}"):s="cause:{alarm:"+A+", criterion_index: "+y+", mode: threshold, crossing: "+m+", value: "+a+", gap: "+_+", occurences: "+E+", field: "+u+"}"}t.push(s)}if("0"===u[3]&&"1"===u[4]){e-=3;let a="",s="";if(0===h)"none"===p?a=((256*o[d+1+e*v+b]+o[d+2+e*v+b])/c).toString():"int"===p?a=i((256*o[d+1+e*v+b]+o[d+2+e*v+b])/c).toString():"float"===p&&(a=r((256*o[d+1+e*v+b]+o[d+2+e*v+b])/c).toString()),s="cause:{alarm:"+A+", criterion_index: "+y+", mode: delta, value: "+a+"}";else{let t=o[d+e*v+1+b],l=n[f][g][t].name;"none"===p?a=((256*o[d+2+e*v+b]+o[d+3+e*v+b])/c).toString():"int"===p?a=i((256*o[d+2+e*v+b]+o[d+3+e*v+b])/c).toString():"float"===p&&(a=r((256*o[d+2+e*v+b]+o[d+3+e*v+b])/c).toString()),s="cause:{alarm:"+A+", criterion_index: "+y+", mode: delta, value: "+a+", field: "+l+"}"}t.push(s)}if(v+=1,E=0,S=0,P=0,z=o[d+e*v+b],void 0===z){s.zclheader.alarmmsg=t,a=1;break}}}(o,s,d,c,u,p,f,h,P,S,e,t):4===b?function(e,t,a,o,s,d,c,u,p,m,f,g){let v=0,E=0,P=0,S=0,b=0,h=0;1===m&&(e+=1,h=1),void 0===p&&(p="single"===u?"float":"int8"===u||"int16"===u||"int32"===u?"int":"none");let z=o[d+e*v];for(void 0===z&&(s.zclheader.alarmmsg=t,a=1);0===a;){if(1===m){let t=o[d+e*v+1+E];c=n[f][g][t].divider,p=n[f][g][t].function_type}let u=l(z),y=4*_(u[5])+2*_(u[6])+_(u[7]),A=!0;if("0"===u[0]&&(A=!1),"1"===u[3]&&"0"===u[4]){let a="",s="",_="",m="";if(m="1"===u[1]?"exceed":"fall",0===h)"none"===p?(a=((256*o[d+1+e*v+E]*256*256+256*o[d+2+e*v+E]*256+256*o[d+3+e*v+E]+o[d+4+e*v+E])/c).toString(),_=((256*o[d+5+e*v+E]*256*256+256*o[d+6+e*v+E]*256+256*o[d+7+e*v+E]+o[d+8+e*v+E])/c).toString()):"int"===p?(a=i((256*o[d+1+e*v+E]*256*256+256*o[d+2+e*v+E]*256+256*o[d+3+e*v+E]+o[d+4+e*v+E])/c).toString(),_=i((256*o[d+5+e*v+E]*256*256+256*o[d+6+e*v+E]*256+256*o[d+7+e*v+E]+o[d+8+e*v+E])/c).toString()):"float"===p&&(a=r((256*o[d+1+e*v+E]*256*256+256*o[d+2+e*v+E]*256+256*o[d+3+e*v+E]+o[d+4+e*v+E])/c).toString(),_=r((256*o[d+5+e*v+E]*256*256+256*o[d+6+e*v+E]*256+256*o[d+7+e*v+E]+o[d+8+e*v+E])/c).toString()),P=parseInt(l(o[d+9+e*v+E]),2),P>=128?(S=parseInt(l(256*o[d+10+e*v+E]+o[d+11+e*v+E]),2),b=parseInt(l(256*o[d+12+e*v+E]+o[d+13+e*v+E]),2),E+=4,s="cause:{alarm:"+A+", criterion_index: "+y+", mode: threshold, crossing: "+m+", value: "+a+", gap: "+_+", occurences_up: "+S+", occurences_down: "+b+"}"):s="cause:{alarm:"+A+", criterion_index: "+y+", mode: threshold, crossing: "+m+", value: "+a+", gap: "+_+", occurences: "+P+"}";else{let t=o[d+e*v+1],u=n[f][g][t].name;"none"===p?(a=((256*o[d+2+e*v+E]*256*256+256*o[d+3+e*v+E]*256+256*o[d+4+e*v+E]+o[d+5+e*v+E])/c).toString(),_=((256*o[d+6+e*v+E]*256*256+256*o[d+7+e*v+E]*256+256*o[d+8+e*v+E]+o[d+9+e*v+E])/c).toString()):"int"===p?(a=i((256*o[d+2+e*v+E]*256*256+256*o[d+3+e*v+E]*256+256*o[d+4+e*v+E]+o[d+5+e*v+E])/c).toString(),_=i((256*o[d+6+e*v+E]*256*256+256*o[d+7+e*v+E]*256+256*o[d+8+e*v+E]+o[d+9+e*v+E])/c).toString()):"float"===p&&(a=r((256*o[d+2+e*v+E]*256*256+256*o[d+3+e*v+E]*256+256*o[d+4+e*v+E]+o[d+5+e*v+E])/c).toString(),_=r((256*o[d+6+e*v+E]*256*256+256*o[d+7+e*v+E]*256+256*o[d+8+e*v+E]+o[d+9+e*v+E])/c).toString()),P=parseInt(l(o[d+10+e*v+E]),2),P>=128?(S=parseInt(l(256*o[d+11+e*v+E]+o[d+12+e*v+E]),2),b=parseInt(l(256*o[d+13+e*v+E]+o[d+14+e*v+E]),2),E+=4,s="cause:{alarm:"+A+", criterion_index: "+y+", mode: threshold, crossing: "+m+", value: "+a+", gap: "+_+", occurences_up: "+S+", occurences_down: "+b+", field: "+u+"}"):s="cause:{alarm:"+A+", criterion_index: "+y+", mode: threshold, crossing: "+m+", value: "+a+", gap: "+_+", occurences: "+P+", field: "+u+"}"}t.push(s)}if("0"===u[3]&&"1"===u[4]){e-=3;let a="",s="";if(0===h)"none"===p?a=((256*o[d+1+e*v+E]*256*256+256*o[d+2+e*v+E]*256+256*o[d+3+e*v+E]+o[d+4+e*v+E])/c).toString():"int"===p?a=i((256*o[d+1+e*v+E]*256*256+256*o[d+2+e*v+E]*256+256*o[d+3+e*v+E]+o[d+4+e*v+E])/c).toString():"float"===p&&(a=r((256*o[d+1+e*v+E]*256*256+256*o[d+2+e*v+E]*256+256*o[d+3+e*v+E]+o[d+4+e*v+E])/c).toString()),s="cause:{alarm:"+A+", criterion_index: "+y+", mode: delta, value: "+a+"}";else{let t=o[d+e*v+1],l=n[f][g][t].name;"none"===p?a=((256*o[d+2+e*v+E]*256*256+256*o[d+3+e*v+E]*256+256*o[d+4+e*v+E]+o[d+5+e*v+E])/c).toString():"int"===p?a=i((256*o[d+2+e*v+E]*256*256+256*o[d+3+e*v+E]*256+256*o[d+4+e*v+E]+o[d+5+e*v+E])/c).toString():"float"===p&&(a=r((256*o[d+2+e*v+E]*256*256+256*o[d+3+e*v+E]*256+256*o[d+4+e*v+E]+o[d+5+e*v+E])/c).toString()),s="cause:{alarm:"+A+", criterion_index: "+y+", mode: delta, value: "+a+", field: "+l+"}"}t.push(s)}if(v+=1,P=0,b=0,S=0,z=o[d+e*v+E],void 0===z){s.zclheader.alarmmsg=t,a=1;break}}}(o,s,d,c,u,p,f,h,P,S,e,t):1===b?function(e,t,a,o,s,d,c,u,p,m,f,g){let v=0,E=0,P=0,S=0,b=0,h=0;1===m&&(e+=1,h=1),void 0===p&&(p="single"===u?"float":"int8"===u||"int16"===u||"int32"===u?"int":"none");let z=o[d+e*v];for(void 0===z&&(s.zclheader.alarmmsg=t,a=1);0===a;){if(1===m){let t=o[d+e*v+1+E];c=n[f][g][t].divider,p=n[f][g][t].function_type}let u=l(z),y=4*_(u[5])+2*_(u[6])+_(u[7]),A=!0;if("0"===u[0]&&(A=!1),"1"===u[3]&&"0"===u[4]){let a="",s="",_="",m="";if(m="1"===u[1]?"exceed":"fall",0===h)"none"===p?(a=(o[d+1+e*v+E]/c).toString(),_=(o[d+2+e*v+E]/c).toString()):"int"===p?(a=i(o[d+1+e*v+E]/c).toString(),_=i(o[d+2+e*v+E]/c).toString()):"float"===p&&(a=r(o[d+1+e*v+E]/c).toString(),_=r(o[d+2+e*v+E]/c).toString()),P=parseInt(l(o[d+3+e*v+E]),2),P>=128?(S=parseInt(l(256*o[d+4+e*v+E]+o[d+5+e*v+E]),2),b=parseInt(l(256*o[d+6+e*v+E]+o[d+7+e*v+E]),2),E+=4,s="cause:{alarm:"+A+", criterion_index: "+y+", mode: threshold, crossing: "+m+", value: "+a+", gap: "+_+", occurences_up: "+S+", occurences_down: "+b+"}"):s="cause:{alarm:"+A+", criterion_index: "+y+", mode: threshold, crossing: "+m+", value: "+a+", gap: "+_+", occurences: "+P+"}";else{let t=o[d+e*v+1+E],u=n[f][g][t].name;"none"===p?(a=(o[d+2+e*v+E]/c).toString(),_=(o[d+3+e*v+E]/c).toString()):"int"===p?(a=i(o[d+2+e*v+E]/c).toString(),_=i(o[d+3+e*v+E]/c).toString()):"float"===p&&(a=r(o[d+2+e*v+E]/c).toString(),_=r(o[d+3+e*v+E]/c).toString()),P=parseInt(l(o[d+4+e*v+E]),2),P>=128?(S=parseInt(l(256*o[d+5+e*v+E]+o[d+6+e*v+E]),2),b=parseInt(l(256*o[d+7+e*v+E]+o[d+8+e*v+E]),2),E+=4,s="cause:{alarm:"+A+", criterion_index: "+y+", mode: threshold, crossing: "+m+", value: "+a+", gap: "+_+", occurences_up: "+S+", occurences_down: "+b+", field: "+u+"}"):s="cause:{alarm:"+A+", criterion_index: "+y+", mode: threshold, crossing: "+m+", value: "+a+", gap: "+_+", occurences: "+P+", field: "+u+"}"}t.push(s)}if("0"===u[3]&&"1"===u[4]){e-=3;let a="",s="";if(0===h)"none"===p?a=(o[d+1+e*v+E]/c).toString():"int"===p?a=i(o[d+1+e*v+E]/c).toString():"float"===p&&(a=r(o[d+1+e*v+E]/c).toString()),s="cause:{alarm:"+A+", criterion_index: "+y+", mode: delta, value: "+a+"}";else{let t=o[d+e*v+1+E],l=n[f][g][t].name;"none"===p?a=(o[d+2+e*v+E]/c).toString():"int"===p?a=i(o[d+2+e*v+E]/c).toString():"float"===p&&(a=r(o[d+2+e*v+E]/c).toString()),s="cause:{alarm:"+A+", criterion_index: "+y+", mode: delta, value: "+a+", field: "+l+"}"}t.push(s)}if(v+=1,P=0,b=0,S=0,z=o[d+e*v+E],void 0===z){s.zclheader.alarmmsg=t,a=1;break}}}(o,s,d,c,u,p,f,h,P,S,e,t):3===b&&function(e,t,a,o,s,d,c,u,p,m,f,g){let v=0,E=0,P=0,S=0,b=0,h=0;1===m&&(e+=1,h=1),void 0===p&&(p="single"===u?"float":"int8"===u||"int16"===u||"int32"===u?"int":"none");let z=o[d+e*v];for(void 0===z&&(s.zclheader.alarmmsg=t,a=1);0===a;){if(1===m){let t=o[d+e*v+1+E];c=n[f][g][t].divider,p=n[f][g][t].function_type}let u=l(z),y=4*_(u[5])+2*_(u[6])+_(u[7]),A=!0;if("0"===u[0]&&(A=!1),"1"===u[3]&&"0"===u[4]){let a="",s="",_="",m="";if(m="1"===u[1]?"exceed":"fall",0===h)"none"===p?(a=((256*o[d+1+e*v+E]+o[d+2+e*v+E]+o[d+3+e*v+E])/c).toString(),_=((256*o[d+4+e*v+E]+o[d+5+e*v+E]+o[d+6+e*v+E])/c).toString()):"int"===p?(a=i((256*o[d+1+e*v+E]+o[d+2+e*v+E]+o[d+3+e*v+E])/c).toString(),_=i((256*o[d+4+e*v+E]+o[d+5+e*v+E]+o[d+6+e*v+E])/c).toString()):"float"===p&&(a=r((256*o[d+1+e*v+E]+o[d+2+e*v+E]+o[d+3+e*v+E])/c).toString(),_=r((256*o[d+4+e*v+E]+o[d+5+e*v+E]+o[d+6+e*v+E])/c).toString()),P=parseInt(l(o[d+7+e*v+E]),2),P>=128?(S=parseInt(l(256*o[d+8+e*v+E]+o[d+9+e*v+E]),2),b=parseInt(l(256*o[d+10+e*v+E]+o[d+11+e*v+E]),2),E+=4,s="cause:{alarm:"+A+", criterion_index: "+y+", mode: threshold, crossing: "+m+", value: "+a+", gap: "+_+", occurences_up: "+S+", occurences_down: "+b+"}"):s="cause:{alarm:"+A+", criterion_index: "+y+", mode: threshold, crossing: "+m+", value: "+a+", gap: "+_+", occurences: "+P+"}";else{let t=o[d+e*v+1+E],u=n[f][g][t].name;"none"===p?(a=((256*o[d+2+e*v+E]+o[d+3+e*v+E]+o[d+4+e*v+E])/c).toString(),_=((256*o[d+5+e*v+E]+o[d+6+e*v+E]+o[d+7+e*v+E])/c).toString()):"int"===p?(a=i((256*o[d+2+e*v+E]+o[d+3+e*v+E]+o[d+4+e*v+E])/c).toString(),_=i((256*o[d+5+e*v+E]+o[d+6+e*v+E]+o[d+7+e*v+E])/c).toString()):"float"===p&&(a=r((256*o[d+2+e*v+E]+o[d+3+e*v+E]+o[d+4+e*v+E])/c).toString(),_=r((256*o[d+5+e*v+E]+o[d+6+e*v+E]+o[d+7+e*v+E])/c).toString()),P=parseInt(l(o[d+8+e*v+E]),2),P>=128?(S=parseInt(l(256*o[d+9+e*v+E]+o[d+10+e*v+E]),2),b=parseInt(l(256*o[d+11+e*v+E]+o[d+12+e*v+E]),2),E+=4,s="cause:{alarm:"+A+", criterion_index: "+y+", mode: threshold, crossing: "+m+", value: "+a+", gap: "+_+", occurences_up: "+S+", occurences_down: "+b+", field: "+u+"}"):s="cause:{alarm:"+A+", criterion_index: "+y+", mode: threshold, crossing: "+m+", value: "+a+", gap: "+_+", occurences: "+P+", field: "+u+"}"}t.push(s)}if("0"===u[3]&&"1"===u[4]){e-=3;let a="",s="";if(0===h)"none"===p?a=((256*o[d+1+e*v+E]*256+256*o[d+2+e*v+E]+o[d+3+e*v+E])/c).toString():"int"===p?a=i((256*o[d+1+e*v+E]+o[d+2+e*v+E]+o[d+3+e*v+E])/c).toString():"float"===p&&(a=r((256*o[d+1+e*v+E]+o[d+2+e*v+E]+o[d+3+e*v+E])/c).toString()),s="cause:{alarm:"+A+", criterion_index: "+y+", mode: delta, value: "+a+"}";else{let t=o[d+e*v+1],l=n[f][g][t].name;"none"===p?a=((256*o[d+2+e*v+E]+o[d+3+e*v+E]+o[d+4+e*v+E])/c).toString():"int"===p?a=i((256*o[d+2+e*v+E]+o[d+3+e*v+E]+o[d+4+e*v+E])/c).toString():"float"===p&&(a=r((256*o[d+2+e*v+E]+o[d+3+e*v+E]+o[d+4+e*v+E])/c).toString()),s="cause:{alarm:"+A+", criterion_index: "+y+", mode: delta, value: "+a+", field: "+l+"}"}t.push(s)}if(v+=1,P=0,b=0,S=0,z=o[d+e*v+E],void 0===z){s.zclheader.alarmmsg=t,a=1;break}}}(o,s,d,c,u,p,f,h,P,S,e,t)}function p(e){let t="";for(let a=0;a<e.length;a++){let n=e[a].toString(16).toUpperCase();1===n.length&&(n="0"+n),t+=n}return t}function m(e,a){let n={},_=0;n.lora={},n.lora.port=a;let m=e.length,f="";n.lora.payload="";for(let t=0;t<m;t++){f=e[t].toString(16).toUpperCase(),1===f.length&&(f="0"+f),n.lora.payload+=f;let a=new Date;n.lora.date=a.toISOString()}if(125===a)if(!1==!(1&e[0])){n.zclheader={},n.zclheader.report="standard";let a=-1,m=-1,g=-1;if(n.zclheader.endpoint=(224&e[0])>>5|(6&e[0])<<2,m=e[1],n.zclheader.cmdID=s(m,2),g=256*e[2]+e[3],n.zclheader.clustID=s(g,4),10===m||138===m||1===m){_=1,n.data={},a=256*e[4]+e[5],n.zclheader.attID=s(a,4);let v=e[4],E=0;if(10!==m&&138!==m||(E=7),138===m&&(n.zclheader.alarm=1),1===m&&(E=8,n.zclheader.status=e[6]),83!==g&&84!==g&&85!==g&&86!==g&&87!==g||(n.data=function(e,t,a){const n=["!?!","*",""," ACTIF","ACTIF","CONSO","CONTROLE","DEP","INACTIF","PROD","TEST","kVA","kW"],i=["!?!","*",""," ? ","000","HC","HCD","HCE","HCH","HH","HH ","HP","HP ","HPD","HPE","HPH","JA","JA ","P","P  ","PM","PM ","XXX"],s=["!?!","*","","BT 4 SUP36","BT 5 SUP36","HTA 5     ","HTA 8     ","TJ EJP    ","TJ EJP-HH ","TJ EJP-PM ","TJ EJP-SD ","TJ LU     ","TJ LU-CH  ","TJ LU-P   ","TJ LU-PH  ","TJ LU-SD  ","TJ MU     ","TV A5 BASE","TV A8 BASE","BASE","H PLEINE-CREUSE","HPHC","HC","HC et Week-End","EJP","PRODUCTEUR"],l=["!?!","*",""," ? ","000","HC","HCD","HCE","HCH","HH","HH ","HP","HP ","HPD","HPE","HPH","JA","JA ","P","P  ","PM","PM ","XXX","INDEX NON CONSO","BASE","HEURE CREUSE","HEURE PLEINE","HEURE NORMALE","HEURE POINTE","HC BLEU","BUHC","HP BLEU","BUHP","HC BLANC","BCHC","HP BLANC","BCHP","HC ROUGE","RHC","HP ROUGE","RHP","HEURE WEEK-END"],_=["!?!","*","","BT 4 SUP36","BT 5 SUP36","HTA 5     ","HTA 8     ","TJ EJP    ","TJ EJP-HH ","TJ EJP-PM ","TJ EJP-SD ","TJ LU     ","TJ LU-CH  ","TJ LU-P   ","TJ LU-PH  ","TJ LU-SD  ","TJ MU     ","TV A5 BASE","TV A8 BASE","BASE","H PLEINE-CREUSE","HPHC","HC","HC et Week-End","EJP","PRODUCTEUR"];function c(e,t,a){let n="";if(128&e[t]){const a=127&e[t];t+=1,a>0?(n=String.fromCharCode.apply(null,e.slice(t,t+a)),t+=a):n=""}else n=a[127&e[t]],t+=1;return{x:n,i:t}}function u(e,t){return{x:d(o(e,t,"U8"),2)+"/"+d(o(e,t+1,"U8"),2)+"/"+d(o(e,t+2,"U8"),2)+" "+d(o(e,t+3,"U8"),2)+":"+d(o(e,t+4,"U8"),2)+":"+d(o(e,t+5,"U8"),2),i:t+=6}}function m(e,t,a){let n=o(e,t,"U32",a);t+=4,n+=new Date("2000/01/01 00:00:00").getTime()/1e3,n+=3600;const i=new Date(1e3*n);return{x:d(i.getDate(),2)+"/"+d(i.getMonth(),2)+"/"+i.getFullYear()+" "+d(i.getHours(),2)+":"+d(i.getMinutes(),2)+":"+d(i.getSeconds(),2),i:t}}function f(e,t,a){return{x:String.fromCharCode.apply(null,e.slice(t,t+a)),i:t+=a}}function g(e,t){return{b:e,i:t}}function v(e,t){return function(e,t){const a=e.slice(t).indexOf(0);return{x:String.fromCharCode.apply(null,e.slice(t,t+a)),i:t+=a+1}}(e,t)}function E(e,t){return{x:o(e,t,"U8"),i:t+=1}}function P(e,t){return{x:o(e,t,"U16"),i:t+=2}}function S(e,t){return{x:o(e,t,"I16"),i:t+=2}}function b(e,t){return{x:o(e,t,"U24"),i:t+=3}}function h(e,t){let a={};for(t=1;t<=4;t++)a["Value_"+t]=o(e,t,"U24"),t+=3;return{x:a,i:t}}function z(e,t){return{x:o(e,t,"U32"),i:t+=4}}function y(e,t){return ge=r(e),{x:ge,i:t+=4}}function A(e,t){return u(e,t)}function H(e,t){return m(e,t)}function C(e,t){return c(e,t,i)}function T(e,t){return{x:{},i:t=c(e,m(e,t).i,i).i}}function D(e,t){let a="";return a=d(o(e,t,"U8"),2)+"/"+d(o(e,++t,"U8"),2)+" "+d(o(e,++t,"U8"),2),{x:a,i:++t}}function I(e,t){let a={};const n=f(e,t,1),i=u(e,n.i),r=o(e,t,"U8");return t=i.i+1,a.S=n.x,a.Date=i.x,a.Value=r,{x:a,i:t}}function N(e,t){let a={};const n=f(e,t,1),i=u(e,n.i),r=o(e,t,"U16");return t=i.i+1,a.S=n.x,a.Date=i.x,a.Value=r,{x:a,i:t}}function R(e,t){let a={};const n=f(e,t,1),i=u(e,n.i),r=o(e,t,"U24");return t=i.i+1,a.S=n.x,a.Date=i.x,a.Value=r,{x:a,i:t}}function U(e,t){return c(e,t,n)}function M(e,t){let a={};const i=o(e,t,"U24");t+=3,a.Value=i;const r=c(e,t,n);return a.Label=r.x,{x:a,i:t=r.i}}function x(e,t){return c(e,t,s)}function w(e,t){let a=[];for(let n=0;n<11;n++){let n={};const i=d(o(e,t,"U8"),2);if(t++,255===i)n.Status="NONUTILE";else{const a=d(o(e,t,"U8"),2);t++;const r=p(e.slice(t,2));t++,n.Time=i+":"+a,n.Status=r,t+=e[t]+1}a.push(n)}return{x:a,i:t}}function O(e){return e}function F(e){return e}function J(e){return e}function B(e){return e}function V(e){return e}function X(e){return e}function G(e){return e}function q(e){return e}function k(e){return e}function L(e){return e}function Y(e){return e}function j(e){return e}function W(e){return e}function Z(e){return e}function Q(e){return e}function K(e){return e}function $(e){return e}function ee(e){return e}function te(e){return e}function ae(e){return e}function ne(e){return e}const ie=[["CONTRAT",v,0,F],["DATECOUR",A,0,O],["DATE",A,0,O],["EA",b,0,function(e){return e}],["ERP",b,0,function(e){return e}],["PTCOUR",v,0,F],["PREAVIS",v,0,F],["MODE",g,0,F],["DATEPA1",A,0,O],["PA1",P,0,j],["DATEPA2",A,0,O],["PA2",P,0,j],["DATEPA3",A,0,O],["PA3",P,0,j],["DATEPA4",A,0,O],["PA4",P,0,j],["DATEPA5",A,0,O],["PA5",P,0,j],["DATEPA6",A,0,O],["PA6",P,0,j],["*p*",b,0,G],["KDC",E,0,Y],["KDCD",E,0,Y],["TGPHI",y,0,ne],["PSP",P,0,j],["PSPM",P,0,j],["PSHPH",P,0,j],["PSHPD",P,0,j],["PSHCH",P,0,j],["PSHCD",P,0,j],["PSHPE",P,0,j],["PSHCE",P,0,j],["PSJA",P,0,j],["PSHH",P,0,j],["PSHD",P,0,j],["PSHM",P,0,j],["PSDSM",P,0,j],["PSSCM",P,0,j],["MODE",g,0,F],["PA1MN",P,0,j],["PA10MN",P,0,j],["PREA1MN",S,0,W],["PREA10MN",S,0,W],["TGPHI",y,0,ne],["U10MN",P,0,function(e){return e}]],re=[["DEBUTp",A,0,O,0],["FINp",A,0,O,6],["CAFp",P,0,X,12],["DATEEAp",A,0,O,14],["EApP",b,0,ee,20],["EApPM",b,0,ee,23],["EApHCE",b,0,ee,26],["EApHCH",b,0,ee,29],["EApHH",b,0,ee,32],["EApHCD",b,0,ee,35],["EApHD",b,0,ee,38],["EApJA",b,0,ee,41],["EApHPE",b,0,ee,44],["EApHPH",b,0,ee,47],["EApHPD",b,0,ee,50],["EApSCM",b,0,ee,53],["EApHM",b,0,ee,56],["EApDSM",b,0,ee,59],["DATEERPp",A,0,O,62],["ERPpP",b,0,ae,68],["ERPpPM",b,0,ae,71],["ERPpHCE",b,0,ae,74],["ERPpHCH",b,0,ae,77],["ERPpHH",b,0,ae,80],["ERPpHCD",b,0,ae,83],["ERPpHD",b,0,ae,86],["ERPpJA",b,0,ae,89],["ERPpHPE",b,0,ae,92],["ERPpHPH",b,0,ae,95],["ERPpHPD",b,0,ae,98],["ERPpSCM",b,0,ae,101],["ERPpHM",b,0,ae,104],["ERPpDSM",b,0,ae,107],["DATEERNp",A,0,O,110],["ERNpP",b,0,ae,116],["ERNpPM",b,0,ae,119],["ERNpHCE",b,0,ae,122],["ERNpHCH",b,0,ae,125],["ERNpHH",b,0,ae,128],["ERNpHCD",b,0,ae,131],["ERNpHD",b,0,ae,134],["ERNpJA",b,0,ae,137],["ERNpHPE",b,0,ae,140],["ERNpHPH",b,0,ae,143],["ERNpHPD",b,0,ae,146],["ERNpSCM",b,0,ae,149],["ERNpHM",b,0,ae,152],["ERNpDSM",b,0,ae,155]],oe=[["DEBUTp1",A,0,O,0],["FINp1",A,0,O,6],["CAFp1",P,0,X,12],["DATEEAp1",A,0,O,14],["EAp1P",b,0,ee,20],["EAp1PM",b,0,ee,23],["EAp1HCE",b,0,ee,26],["EAp1HCH",b,0,ee,29],["EAp1HH",b,0,ee,32],["EAp1HCD",b,0,ee,35],["EAp1HD",b,0,ee,38],["EAp1JA",b,0,ee,41],["EAp1HPE",b,0,ee,44],["EAp1HPH",b,0,ee,47],["EAp1HPD",b,0,ee,50],["EAp1SCM",b,0,ee,53],["EAp1HM",b,0,ee,56],["EAp1DSM",b,0,ee,59],["DATEERPp1",A,0,O,62],["ERPp1P",b,0,ae,68],["ERPp1PM",b,0,ae,71],["ERPp1HCE",b,0,ae,74],["ERPp1HCH",b,0,ae,77],["ERPp1HH",b,0,ae,80],["ERPp1HCD",b,0,ae,83],["ERPp1HD",b,0,ae,86],["ERPp1JA",b,0,ae,89],["ERPp1HPE",b,0,ae,92],["ERPp1HPH",b,0,ae,95],["ERPp1HPD",b,0,ae,98],["ERPp1SCM",b,0,ae,101],["ERPp1HM",b,0,ae,104],["ERPp1DSM",b,0,ae,107],["DATEERNp1",A,0,O,110],["ERNp1P",b,0,ae,116],["ERNp1PM",b,0,ae,119],["ERNp1HCE",b,0,ae,122],["ERNp1HCH",b,0,ae,125],["ERNp1HH",b,0,ae,128],["ERNp1HCD",b,0,ae,131],["ERNp1HD",b,0,ae,134],["ERNp1JA",b,0,ae,137],["ERNp1HPE",b,0,ae,140],["ERNp1HPH",b,0,ae,143],["ERNp1HPD",b,0,ae,146],["ERNp1SCM",b,0,ae,149],["ERNp1HM",b,0,ae,152],["ERNp1DSM",b,0,ae,155]],se=[["ADIR1",P,0,V],["ADIR2",P,0,V],["ADIR3",P,0,V],["ADCO",v,0,F],["OPTARIF",v,0,F],["ISOUSC",E,0,B],["BASE",z,0,L],["HCHC",z,0,L],["HCHP",z,0,L],["EJPHN",z,0,L],["EJPHPM",z,0,L],["BBRHCJB",z,0,L],["BBRHPJB",z,0,L],["BBRHCJW",z,0,L],["BBRHPJW",z,0,L],["BBRHCJR",z,0,L],["BBRHPJR",z,0,L],["PEJP",E,0,B],["GAZ",z,0,k],["AUTRE",z,0,k],["PTEC",v,0,F],["DEMAIN",v,0,F],["IINST",P,0,V],["IINST1",P,0,V],["IINST2",P,0,V],["IINST3",P,0,V],["ADPS",P,0,V],["IMAX",P,0,V],["IMAX1",P,0,V],["IMAX2",P,0,V],["IMAX3",P,0,V],["PMAX",z,0,G],["PAPP",z,0,G],["HHPHC",function(e,t){return{x:String.fromCharCode.apply(null,e.slice(0,1)),i:t+=1}},0,function(e){return e}],["MOTDETAT",v,0,F],["PPOT",E,0,function(e){return e}]],de=[["JAUNE",function(e,t){let a="";const n=d(o(e,t,"U8"),2),i=d(o(e,++t,"U8"),2);return a=d(o(e,++t,"U8"),2)+"/"+d(o(e,++t,"U8"),2)+" "+n+":"+i,{x:a,i:++t}},0,O],["JAUNE",v,0,F],["JAUNE",v,0,F],["JAUNE",b,0,G],["JAUNE",E,0,B],["ENERG",function(e,t){let a={};for(t=1;t<=4;t++)a["Value_"+t]=o(e,t,"U24"),t+=3;return{x:a,i:t}},0,q],["ENERG",b,0,q],["ENERG",b,0,q],["ENERG",b,0,q],["ENERG",b,0,q],["ENERG",b,0,q],["PERCC",D,0,O],["PERCC",E,0,B],["PMAXC",h,0,G],["PMAXC",b,0,G],["PMAXC",b,0,G],["PMAXC",b,0,G],["TDEPA",h,0,G],["TDEPA",b,0,G],["TDEPA",b,0,G],["TDEPA",b,0,G],["PERCP",D,0,O],["PERCP",E,0,B],["PMAXP",h,0,G],["PMAXP",b,0,G],["PMAXP",b,0,G],["PMAXP",b,0,G],["PSOUSC",h,0,G],["PSOUSC",b,0,G],["PSOUSC",b,0,G],["PSOUSC",b,0,G],["PSOUSP",h,0,G],["PSOUSP",b,0,G],["PSOUSP",b,0,G],["PSOUSP",b,0,G],["FCOU",function(e,t){let a="";return a=d(o(e,t,"U8"),2)+":"+d(o(e,++t,"U8"),2),{x:a,i:++t}},0,O],["FCOU",E,0,B]],le=[["ADSC",v,0,F],["VTIC",E,0,B],["DATE",function(e,t){let a={};const n=f(e,t,1),i=u(e,n.i);return a.S=n.x,a.Date=i.x,{x:a,i:t=i.i}},0,O],["NGTF",function(e,t){return c(e,t,_)},0,F],["LTARF",function(e,t){return c(e,t,l)},0,F],["EAST",z,0,L],["EASF01",z,0,L],["EASF02",z,0,L],["EASF03",z,0,L],["EASF04",z,0,L],["EASF05",z,0,L],["EASF06",z,0,L],["EASF07",z,0,L],["EASF08",z,0,L],["EASF09",z,0,L],["EASF10",z,0,L],["EASD01",z,0,L],["EASD02",z,0,L],["EASD03",z,0,L],["EASD04",z,0,L],["EAIT",z,0,L],["ERQ1",z,0,L],["ERQ2",z,0,L],["ERQ3",z,0,L],["ERQ4",z,0,L],["IRMS1",P,0,V],["IRMS2",P,0,V],["IRMS3",P,0,V],["URMS1",P,0,V],["URMS2",P,0,V],["URMS3",P,0,V],["PREF",E,0,B],["PCOUP",E,0,B],["SINSTS",b,0,G],["SINSTS1",b,0,G],["SINSTS2",b,0,G],["SINSTS3",b,0,G],["SMAXSN",R,0,G],["SMAXSN1",R,0,G],["SMAXSN2",R,0,G],["SMAXSN3",R,0,G],["SMAXSN?1",R,0,G],["SMAXSN1?1",R,0,G],["SMAXSN2?1",R,0,G],["SMAXSN3?1",R,0,G],["SINSTI",b,0,G],["SMAXIN",R,0,G],["SMAXIN-1",R,0,G],["CCASN",R,0,G],["CCASN?1",R,0,G],["CCAIN",R,0,G],["CCAIN?1",R,0,G],["UMOY1",N,0,V],["UMOY2",N,0,V],["UMOY3",N,0,V],["STGE",function(e,t){const a=p(e.slice(t,2));return t+=4,{x:a,i:t+=4}},0,O],["DPM1",I,0,B],["FPM1",I,0,B],["DPM2",I,0,B],["FPM2",I,0,B],["DPM3",I,0,B],["FPM3",I,0,B],["MSG1",v,0,F],["MSG2",v,0,F],["PRM",v,0,F],["RELAIS",function(e,t){return{x:o(e,t,"U8"),i:++t}},0,V],["NTARF",E,0,B],["NJOURF",E,0,B],["NJOURF+1",E,0,B],["PJOURF+1",w,0,O],["PPOINTE",w,0,O]],_e=[["TRAME",U,0,F],["ADS",function(e,t){return{x:p(e.slice(t+1,t+1+e[t])),i:t+=e[t]+1}},0,O],["MESURES1",x,0,F],["DATE",A,0,O],["EA_s",b,0,Z],["ER+_s",b,0,Q],["ER-_s",b,0,Q],["EAPP_s",b,0,K],["EA_i",b,0,Z],["ER+_i",b,0,Q],["ER-_i",b,0,Q],["EAPP_i",b,0,K],["PTCOUR1",C,0,F],["TARIFDYN",U,0,F],["ETATDYN1",C,0,F],["PREAVIS1",C,0,J],["TDYN1CD",T,0,O],["TDYN1CF",T,0,O],["TDYN1FD",T,0,O],["TDYN1FF",T,0,O],["MODE",U,0,F],["CONFIG",U,0,F],["DATEPA1",A,0,O],["PA1_s",P,0,j],["PA1_i",P,0,j],["DATEPA2",H,0,O],["PA2_s",P,0,j],["PA2_i",P,0,j],["DATEPA3",H,0,O],["PA3_s",P,0,j],["PA3_i",P,0,j],["DATEPA4",H,0,O],["PA4_s",P,0,j],["PA4_i",P,0,j],["DATEPA5",H,0,O],["PA5_s",P,0,j],["PA5_i",P,0,j],["DATEPA6",H,0,O],["PA6_s",P,0,j],["PA6_i",P,0,j],["DebP",H,0,O],["EAP_s",b,0,$],["EAP_i",b,0,$],["ER+P_s",b,0,te],["ER-P_s",b,0,te],["ER+P_i",b,0,te],["ER-P_i",b,0,te],["DebP-1",H,0,O],["FinP-1",H,0,O],["EaP-1_s",b,0,$],["EaP-1_i",b,0,$],["ER+P-1_s",b,0,te],["ER-P-1_s",b,0,te],["ER+P-1_i",b,0,te],["ER-P-1_i",b,0,te],["PS",M,0,O],["PREAVIS",U,0,F],["PA1MN",P,0,j],["PMAX_s",M,0,O],["PMAX_i",M,0,O],["TGPHI_s",y,0,ne],["TGPHI_i",y,0,ne],["MESURES2",x,0,F],["PTCOUR2",C,0,F],["ETATDYN2",C,0,F],["PREAVIS2",C,0,J],["TDYN2CD",T,0,O],["TDYN2CF",T,0,O],["TDYN2FD",T,0,O],["TDYN2FF",T,0,O],["DebP_2",H,0,O],["EaP_s2",b,0,$],["DebP-1_2",H,0,O],["FinP-1_2",H,0,O],["EaP-1_s2",b,0,$],["_DDMES1_",b,0,function(e){return e}]];let ce=[],ue={};if(83==e)if(!1&t)ue=ie,ce._TICFrameType="ICE Generale";else if(!1&t)ue=re,ce._TICFrameType="ICE Periode P";else{if(!(!1&t))return ce;ue=oe,ce._TICFrameType="ICE Periode P moins 1"}else if(84==e)ue=se,ce._TICFrameType="CBE/Historique";else if(85==e)ue=de,ce._TICFrameType="CJE";else if(86==e)ue=le,ce._TICFrameType="Standard";else{if(87!=e)return ce;ue=_e,ce._TICFrameType="PMEPMI"}let{DescSize:pe,Indexes:me}=function(e){let t=[];const a=e[0];let n=31&a;if(0==n&&(n=8),32&a)for(let a=1;a<n;a++)t.push(e[a]);else{let a=0;for(let i=n;i>1;i--)for(let n=0;n<8;n++)e[i-1]>>n&1&&t.push(a),a++}return{DescSize:n,Indexes:t}}(a),fe=a.slice(0,pe),ge={};128&~fe[0]||(ge.Obsolete=!0),ge.Bytes=p(fe),ge.Indexes=me,ce._Descriptor=ge;let ve=pe;for(let e=0;e<me.length;e++){const t=me[e],n=ue[t][1](a,ve);ce[ue[t][0]]=ue[t][3](n.x),ve=n.i}return ce}(g,a,e.slice(E+1))),0===g&&2===a){n.data.firmware="";for(let t=0;t<3;t++)n.data.firmware+=String(e[E+t]),t<2&&(n.data.firmware+=".");let t=256*e[E+3]*256+256*e[E+4]+e[E+5];n.data.firmware+="."+t.toString()}if(0===g&&3===a){const t=e[E];n.data.kernel="";for(let a=0;a<t;a++)n.data.kernel+=String.fromCharCode(e[E+1+a])}if(0===g&&4===a){const t=e[E];n.data.manufacturer="";for(let a=0;a<t;a++)n.data.manufacturer+=String.fromCharCode(e[E+1+a])}if(0===g&&5===a){const t=e[E];n.data.model="";for(let a=0;a<t;a++)n.data.model+=String.fromCharCode(e[E+1+a])}if(0===g&&6===a){const t=e[E];n.data.date="";for(let a=0;a<t;a++)n.data.date+=String.fromCharCode(e[E+1+a])}if(0===g&&16===a){const t=e[E];n.data.position="";for(let a=0;a<t;a++)n.data.position+=String.fromCharCode(e[E+1+a])}if(0===g&&32769===a){const t=e[E];n.data.application_name="";for(let a=0;a<t;a++)n.data.application_name+=String.fromCharCode(e[E+1+a])}if(1026===g&&0===a){const t=e[E-1];n.data.temperature=i(256*e[E]+e[E+1],2)/100;let r=E+2;if(138===m||void 0!==e[r]){let i=[];138===m&&i.push("alarm triggered");const o=0,s=100,d=l(e[r]),_="int";r+=1,"0"===d[2]&&"0"===d[3]&&(n.zclheader.alarmmsg=i),"0"===d[2]&&"1"===d[3]&&c(1,i,o,e,n,r),"1"===d[2]&&"0"===d[3]&&u(g,a,6,i,o,e,n,r,t,s,_)}}if(1026===g&&1===a&&(n.data.min_temperature=i(256*e[E]+e[E+1],2)/100),1026===g&&2===a&&(n.data.max_temperature=i(256*e[E]+e[E+1],2)/100),1029===g&&0===a){const t=e[E-1];n.data.humidity=(256*e[E]+e[E+1])/100;let i=E+2;if(138===m||void 0!==e[i]){let r=[];138===m&&r.push("alarm triggered");const o=0,s=100,d=l(e[i]),_="none";i+=1,"0"===d[2]&&"0"===d[3]&&(n.zclheader.alarmmsg=r),"0"===d[2]&&"1"===d[3]&&c(1,r,o,e,n,i),"1"===d[2]&&"0"===d[3]&&u(g,a,6,r,o,e,n,i,t,s,_)}}if(1029===g&&1===a&&(n.data.min_humidity=(256*e[E]+e[E+1])/100),1029===g&&2===a&&(n.data.max_humidity=(256*e[E]+e[E+1])/100),15===g&&1026===a){const t=e[E-1];n.data.index=256*e[E]*256*256+256*e[E+1]*256+256*e[E+2]+e[E+3];let i=E+4;if(138===m||void 0!==e[i]){let r=[];138===m&&r.push("alarm triggered");const o=0,s=1,d=l(e[i]),_="none";i+=1,"0"===d[2]&&"0"===d[3]&&(n.zclheader.alarmmsg=r),"0"===d[2]&&"1"===d[3]&&c(1,r,o,e,n,i),"1"===d[2]&&"0"===d[3]&&u(g,a,10,r,o,e,n,i,t,s,_)}}if(15===g&&85===a){const t=e[E-1];n.data.pin_state=!!e[E];let i=E+1;if(138===m||void 0!==e[i]){let r=[];138===m&&r.push("alarm triggered");const o=0,s=1,d=l(e[i]),_="none";i+=1,"0"===d[2]&&"0"===d[3]&&(n.zclheader.alarmmsg=r),"0"===d[2]&&"1"===d[3]&&c(1,r,o,e,n,i),"1"===d[2]&&"0"===d[3]&&u(g,a,4,r,o,e,n,i,t,s,_)}}if(15===g&&84===a&&(0===e[E]&&(n.data.polarity="normal"),1===e[E]&&(n.data.polarity="reverse")),15===g&&1024===a&&(0===e[E]&&(n.data.edge_selection="none"),1===e[E]&&(n.data.edge_selection="falling edge"),2===e[E]&&(n.data.edge_selection="rising edge"),3===e[E]&&(n.data.edge_selection="both edges"),5===e[E]&&(n.data.edge_selection="polling and falling edge"),6===e[E]&&(n.data.edge_selection="polling and rising edge"),7===e[E]&&(n.data.edge_selection="polling and both edges")),15===g&&1025===a&&(n.data.debounce_period=e[E]),15===g&&1027===a&&(n.data.poll_period=e[E]),15===g&&1028===a&&(n.data.force_notify=e[E]),19===g&&85===a){let t=e[E-1];n.data.output_value=e[E];let i=E+1;if(138===m||void 0!==e[i]){let r=[];138===m&&r.push("alarm triggered");const o=0,s=1,d=l(e[i]),_="none";i+=1,"0"===d[2]&&"0"===d[3]&&(n.zclheader.alarmmsg=r),"0"===d[2]&&"1"===d[3]&&c(1,r,o,e,n,i),"1"===d[2]&&"0"===d[3]&&u(g,a,4,r,o,e,n,i,t,s,_)}}if(6===g&&0===a){let t=e[E];n.data.output=1===t?"ON":"OFF"}if(32776===g&&0===a){let t=e[E-1];n.data.differential_pressure=256*e[E]+e[E+1];let i=E+2;if(138===m||void 0!==e[i]){let r=[];138===m&&r.push("alarm triggered");const o=0,s=1,d=l(e[i]),_="none";i+=1,"0"===d[2]&&"0"===d[3]&&(n.zclheader.alarmmsg=r),"0"===d[2]&&"1"===d[3]&&c(1,r,o,e,n,i),"1"===d[2]&&"0"===d[3]&&u(g,a,6,r,o,e,n,i,t,s,_)}}if(32773===g&&0===a){let t=e[E-1];n.data.pin_state_1=!(1&~e[E+1]),n.data.pin_state_2=!(2&~e[E+1]),n.data.pin_state_3=!(4&~e[E+1]),n.data.pin_state_4=!(8&~e[E+1]),n.data.pin_state_5=!(16&~e[E+1]),n.data.pin_state_6=!(32&~e[E+1]),n.data.pin_state_7=!(64&~e[E+1]),n.data.pin_state_8=!(128&~e[E+1]),n.data.pin_state_9=!(1&~e[E]),n.data.pin_state_10=!(2&~e[E]);let i=E+2;if(138===m||void 0!==e[i]){let r=[];138===m&&r.push("alarm triggered");const o=0,s=100,d=l(e[i]),_="none";i+=1,"0"===d[2]&&"0"===d[3]?n.zclheader.alarmmsg=r:"0"===d[2]&&"1"===d[3]?c(1,r,o,e,n,i):"1"===d[2]&&"0"===d[3]&&u(g,a,4,r,o,e,n,i,t,s,_)}}if(32774===g&&0===a&&(n.data.speed=256*e[E]*256+256*e[E+1]+e[E+2]),32774===g&&1===a&&(n.data.data_bit=e[E]),32774===g&&2===a&&(n.data.parity=e[E]),32774===g&&3===a&&(n.data.stop_bit=e[E]),12===g&&85===a){let t=e[E-1];n.data.analog=r(256*e[E]*256*256+256*e[E+1]*256+256*e[E+2]+e[E+3]);let i=E+4;if(138===m||void 0!==e[i]){let r=[];138===m&&r.push("alarm triggered");const o=0,s=1,d=l(e[i]),_="float";i+=1,"0"===d[2]&&"0"===d[3]&&(n.zclheader.alarmmsg=r),"0"===d[2]&&"1"===d[3]&&c(1,r,o,e,n,i),"1"===d[2]&&"0"===d[3]&&u(g,a,10,r,o,e,n,i,t,s,_)}}if(12===g&&256===a&&(5===e[E+1]&&(n.data.type="ppm"),255===e[E+1]&&0===e[E+3]&&(n.data.type="mA"),255===e[E+1]&&1===e[E+3]&&(n.data.type="mV")),12===g&&32771===a&&(n.data.power_duration=256*e[E]+e[E+1]),12===g&&32772===a){let t={};const a=l(e[E]),n=l(e[E+1]),i=2*a[0]+a[1];0===i&&(t.mode="idle"),1===i&&(t.mode="chock"),2===i&&(t.mode="click");const r=8*a[2]+4*a[3]+2*a[4]+a[5];0===r&&(t.frequency="idle"),1===r&&(t.frequency="1Hz"),2===r&&(t.frequency="10Hz"),3===r&&(t.frequency="25Hz"),4===r&&(t.frequency="50Hz"),5===r&&(t.frequency="100Hz"),6===r&&(t.frequency="200Hz"),7===r&&(t.frequency="400Hz"),8===r&&(t.frequency="1620Hz"),9===r&&(t.frequency="5376Hz"),t.range={};const o=2*a[6]+a[7];0===o&&(t.range.precision="+/- 2g",t.range.value=16),1===o&&(t.range.precision="+/- 4g",t.range.value=32),2===o&&(t.range.precision="+/- 8g",t.range.value=64),3===o&&(t.range.precision="+/- 16g",t.range.value=128);const s=128*n[0]+64*n[1]+32*n[2]+16*n[3]+8*n[4]+4*n[5]+2*n[6]+n[7];t.threshold=s*t.range.value}if(32775===g&&1===a){n.data.modbus_payload="";const t=e[E];for(let a=0;a<t;a++)f=e[E+a+1].toString(16).toUpperCase(),0===a?n.data.modbus_slaveID=e[E+a+1]:1===a?n.data.modbus_fnctID=e[E+a+1]:2===a?n.data.modbus_datasize=e[E+a+1]:n.data.modbus_payload+=f}if(32777===g&&0===a){const t=e[E+2],a=e[E+3];n.data.modbus_frame_series_sent=e[E+1],n.data.modbus_frame_number_in_serie=(224&t)>>5,n.data.modbus_last_frame_of_serie=(28&t)>>2,n.data.modbus_EP9=!(2&~t),n.data.modbus_EP8=!(1&~t),n.data.modbus_EP7=!(128&~a),n.data.modbus_EP6=!(64&~a),n.data.modbus_EP5=!(32&~a),n.data.modbus_EP4=!(16&~a),n.data.modbus_EP3=!(8&~a),n.data.modbus_EP2=!(4&~a),n.data.modbus_EP1=!(2&~a),n.data.modbus_EP0=!(1&~a);let i=E+4;const r=0;if(!0===n.data.modbus_EP0){if(0===r&&(n.data.modbus_slaveID_EP0=e[i],n.data.modbus_fnctID_EP0=e[i+1],n.data.modbus_datasize_EP0=e[i+2],i+=3),n.data.modbus_payload_EP0="",void 0===e[i])return n;for(let t=0;t<n.data.modbus_datasize_EP0;t++)f=e[i+t].toString(16).toUpperCase(),1===f.length&&(f="0"+f),n.data.modbus_payload_EP0+=f;i+=n.data.modbus_datasize_EP0}if(!0===n.data.modbus_EP1){if(0===r&&(n.data.modbus_slaveID_EP1=e[i],n.data.modbus_fnctID_EP1=e[i+1],n.data.modbus_datasize_EP1=e[i+2],i+=3),n.data.modbus_payload_EP1="",void 0===e[i])return n;for(let t=0;t<n.data.modbus_datasize_EP1;t++)f=e[i+t].toString(16).toUpperCase(),1===f.length&&(f="0"+f),n.data.modbus_payload_EP1+=f;i+=n.data.modbus_datasize_EP1}if(!0===n.data.modbus_EP2){if(0===r&&(n.data.modbus_slaveID_EP2=e[i],n.data.modbus_fnctID_EP2=e[i+1],n.data.modbus_datasize_EP2=e[i+2],i+=3),n.data.modbus_payload_EP2="",void 0===e[i])return n;for(let t=0;t<n.data.modbus_datasize_EP2;t++)f=e[i+t].toString(16).toUpperCase(),1===f.length&&(f="0"+f),n.data.modbus_payload_EP2+=f;i+=n.data.modbus_datasize_EP2}if(!0===n.data.modbus_EP3){if(0===r&&(n.data.modbus_slaveID_EP3=e[i],n.data.modbus_fnctID_EP3=e[i+1],n.data.modbus_datasize_EP3=e[i+2],i+=3),n.data.modbus_payload_EP3="",void 0===e[i])return n;for(let t=0;t<n.data.modbus_datasize_EP3;t++)f=e[i+t].toString(16).toUpperCase(),1===f.length&&(f="0"+f),n.data.modbus_payload_EP3+=f;i+=n.data.modbus_datasize_EP3}if(!0===n.data.modbus_EP4){if(0===r&&(n.data.modbus_slaveID_EP4=e[i],n.data.modbus_fnctID_EP4=e[i+1],n.data.modbus_datasize_EP4=e[i+2],i+=3),n.data.modbus_payload_EP4="",void 0===e[i])return n;for(let t=0;t<n.data.modbus_datasize_EP4;t++)f=e[i+t].toString(16).toUpperCase(),1===f.length&&(f="0"+f),n.data.modbus_payload_EP4+=f;i+=n.data.modbus_datasize_EP4}if(!0===n.data.modbus_EP5){if(0===r&&(n.data.modbus_slaveID_EP5=e[i],n.data.modbus_fnctID_EP5=e[i+1],n.data.modbus_datasize_EP5=e[i+2],i+=3),n.data.modbus_payload_EP5="",void 0===e[i])return n;for(let t=0;t<n.data.modbus_datasize_EP5;t++)f=e[i+t].toString(16).toUpperCase(),1===f.length&&(f="0"+f),n.data.modbus_payload_EP5+=f;i+=n.data.modbus_datasize_EP5}if(!0===n.data.modbus_EP6){if(0===r&&(n.data.modbus_slaveID_EP6=e[i],n.data.modbus_fnctID_EP6=e[i+1],n.data.modbus_datasize_EP6=e[i+2],i+=3),n.data.modbus_payload_EP6="",void 0===e[i])return n;for(let t=0;t<n.data.modbus_datasize_EP6;t++)f=e[i+t].toString(16).toUpperCase(),1===f.length&&(f="0"+f),n.data.modbus_payload_EP6+=f;i+=n.data.modbus_datasize_EP6}if(!0===n.data.modbus_EP7){if(0===r&&(n.data.modbus_slaveID_EP7=e[i],n.data.modbus_fnctID_EP7=e[i+1],n.data.modbus_datasize_EP7=e[i+2],i+=3),n.data.modbus_payload_EP7="",void 0===e[i])return n;for(let t=0;t<n.data.modbus_datasize_EP7;t++)f=e[i+t].toString(16).toUpperCase(),1===f.length&&(f="0"+f),n.data.modbus_payload_EP7+=f;i+=n.data.modbus_datasize_EP7}if(!0===n.data.modbus_EP8){if(0===r&&(n.data.modbus_slaveID_EP8=e[i],n.data.modbus_fnctID_EP8=e[i+1],n.data.modbus_datasize_EP8=e[i+2],i+=3),n.data.modbus_payload_EP8="",void 0===e[i])return n;for(let t=0;t<n.data.modbus_datasize_EP8;t++)f=e[i+t].toString(16).toUpperCase(),1===f.length&&(f="0"+f),n.data.modbus_payload_EP8+=f;i+=n.data.modbus_datasize_EP8}if(!0===n.data.modbus_EP9){if(0===r&&(n.data.modbus_slaveID_EP9=e[i],n.data.modbus_fnctID_EP9=e[i+1],n.data.modbus_datasize_EP9=e[i+2],i+=3),n.data.modbus_payload_EP9="",void 0===e[i])return n;for(let t=0;t<n.data.modbus_datasize_EP9;t++)f=e[i+t].toString(16).toUpperCase(),1===f.length&&(f="0"+f),n.data.modbus_payload_EP9+=f;i+=n.data.modbus_datasize_EP9}}if(82===g&&0===a&&(n.data.active_energy=i(256*e[E+1]*256+256*e[E+2]+e[E+3],3),n.data.reactive_energy=i(256*e[E+4]*256+256*e[E+5]+e[E+6],3),n.data.nb_samples=256*e[E+7]+e[E+8],n.data.active_power=i(256*e[E+9]+e[E+10],2),n.data.reactive_power=i(256*e[E+11]+e[E+12],2)),32772===g&&0===a&&(1===e[E]&&(n.data.message_type="confirmed"),0===e[E]&&(n.data.message_type="unconfirmed")),32772===g&&1===a&&(n.data.nb_retry=e[E]),32772===g&&2===a&&(n.data.automatic_association={},n.data.automatic_association.period_in_minutes=256*e[E+1]+e[E+2],n.data.automatic_association.nb_err_frames=256*e[E+3]+e[E+4]),32772===g&&3===a&&(n.data.data_rate=e[E+2]),32772===g&&4===a){n.data.ABP_dev_address="";for(let t=0;t<4;t++)n.data.ABP_dev_address+=String(e[E+1+t]),t<3&&(n.data.ABP_dev_address+=".")}if(32772===g&&5===a){n.data.OTA_app_EUI="";for(let t=0;t<8;t++)n.data.OTA_app_EUI+=String(e[E+1+t]),t<7&&(n.data.OTA_app_EUI+=".")}if(80===g&&4===a){e[E],e[E+1];let t={};const a=e[E+2];for(let n=0;n<a;n++){let a={};a.endpoint=e[E+3+7*n];let i=e[E+4+7*n];a.input_clusters=[];for(let t=0;t<i;t++)a.input_clusters[t]=s(256*e[E+5+7*n+2*t]+e[E+6+7*n+2*t],4);let r=e[E+5+7*n+2*i];a.output_clusters=[];for(let t=0;t<r;t++)a.output_clusters[t]=s(256*e[E+6+7*n+2*t]+e[E+7+7*n+2*t],4);t[n]=a}n.data.configuration=t}if(80===g&&6===a){let t=E+3;const i=e[E-1];1&~e[E+2]||(n.data.main_or_external_voltage=(256*e[t]+e[t+1])/1e3,t+=2),2&~e[E+2]||(n.data.rechargeable_battery_voltage=(256*e[t]+e[t+1])/1e3,t+=2),4&~e[E+2]||(n.data.disposable_battery_voltage=(256*e[t]+e[t+1])/1e3,t+=2),8&~e[E+2]||(n.data.solar_harvesting_voltage=(256*e[t]+e[t+1])/1e3,t+=2),16&~e[E+2]||(n.data.tic_harvesting_voltage=(256*e[t]+e[t+1])/1e3,t+=2);let r=t+1;if(138===m||void 0!==e[r]){let t=[];138===m&&t.push("alarm triggered");const o=0,s=1e3,d="multistate",_=l(e[r]);r+=1;let p=e[r+1];"0"===_[2]&&"0"===_[3]&&(n.zclheader.alarmmsg=t),"0"===_[2]&&"1"===_[3]&&c(1,t,o,e,n,r),"1"===_[2]&&"0"===_[3]&&u(g,a,6,t,o,e,n,r,i,s,d,p)}}if(80===g&&255===v){const t="action "+e[5].toString();n.data[t]="";const a=e[E+1];let i="none";for(let t=0;t<a;t++)i+=String.fromCharCode(e[E+1+t]);n.data[t]=i}if(32778===g&&0===a){let t=E;const r=e[t-1];n.data.positive_active_energy=i(256*e[t+1]*256*256+256*e[t+2]*256+256*e[t+3]+e[t+4],4),t+=4,n.data.negative_active_energy=i(256*e[t+1]*256*256+256*e[t+2]*256+256*e[t+3]+e[t+4],4),t+=4,n.data.positive_reactive_energy=i(256*e[t+1]*256*256+256*e[t+2]*256+256*e[t+3]+e[t+4],4),t+=4,n.data.negative_reactive_energy=i(256*e[t+1]*256*256+256*e[t+2]*256+256*e[t+3]+e[t+4],4),t+=4,n.data.positive_active_power=i(256*e[t+1]*256*256+256*e[t+2]*256+256*e[t+3]+e[t+4],4),t+=4,n.data.negative_active_power=i(256*e[t+1]*256*256+256*e[t+2]*256+256*e[t+3]+e[t+4],4),t+=4,n.data.positive_reactive_power=i(256*e[t+1]*256*256+256*e[t+2]*256+256*e[t+3]+e[t+4],4),t+=4,n.data.negative_reactive_power=i(256*e[t+1]*256*256+256*e[t+2]*256+256*e[t+3]+e[t+4],4);let o=t+5;if(138===m||void 0!==e[o]){let t=[];138===m&&t.push("alarm triggered");const i=0,s=1,d="multistate",_=l(e[o]);o+=1;let p=e[o+1];"0"===_[2]&&"0"===_[3]&&(n.zclheader.alarmmsg=t),"0"===_[2]&&"1"===_[3]&&c(1,t,i,e,n,o),"1"===_[2]&&"0"===_[3]&&u(g,a,10,t,i,e,n,o,r,s,d,p)}}if(32784===g&&0===a){const t=e[E-1];n.data.active_energy_a=i(256*e[E+1]*256*256+256*e[E+2]*256+256*e[E+3]+e[E+4]),n.data.reactive_energy_a=i(256*e[E+5]*256*256+256*e[E+6]*256+256*e[E+7]+e[E+8]),n.data.active_energy_b=i(256*e[E+9]*256*256+256*e[E+10]*256+256*e[E+11]+e[E+12]),n.data.reactive_energy_b=i(256*e[E+13]*256*256+256*e[E+14]*256+256*e[E+15]+e[E+16]),n.data.active_energy_c=i(256*e[E+17]*256*256+256*e[E+18]*256+256*e[E+19]+e[E+20]),n.data.reactive_energy_c=i(256*e[E+21]*256*256+256*e[E+22]*256+256*e[E+23]+e[E+24]),n.data.active_energy_abc=i(256*e[E+25]*256*256+256*e[E+26]*256+256*e[E+27]+e[E+28]),n.data.reactive_energy_abc=i(256*e[E+29]*256*256+256*e[E+30]*256+256*e[E+31]+e[E+32]);let r=E+33;if(138===m||void 0!==e[r]){let i=[];138===m&&i.push("alarm triggered");const o=0,s=1,d="multistate",_=l(e[r]);r+=1;let p=e[r+1];"0"===_[2]&&"0"===_[3]&&(n.zclheader.alarmmsg=i),"0"===_[2]&&"1"===_[3]&&c(1,i,o,e,n,r),"1"===_[2]&&"0"===_[3]&&u(g,a,10,i,o,e,n,r,t,s,d,p)}}else if(32784===g&&1===a){const t=e[E-1];n.data.active_power_a=i(256*e[E+1]*256*256+256*e[E+2]*256+256*e[E+3]+e[E+4]),n.data.reactive_power_a=i(256*e[E+5]*256*256+256*e[E+6]*256+256*e[E+7]+e[E+8]),n.data.active_power_b=i(256*e[E+9]*256*256+256*e[E+10]*256+256*e[E+11]+e[E+12]),n.data.reactive_power_b=i(256*e[E+13]*256*256+256*e[E+14]*256+256*e[E+15]+e[E+16]),n.data.active_power_c=i(256*e[E+17]*256*256+256*e[E+18]*256+256*e[E+19]+e[E+20]),n.data.reactive_power_c=i(256*e[E+21]*256*256+256*e[E+22]*256+256*e[E+23]+e[E+24]),n.data.active_power_abc=i(256*e[E+25]*256*256+256*e[E+26]*256+256*e[E+27]+e[E+28]),n.data.reactive_power_abc=i(256*e[E+29]*256*256+256*e[E+30]*256+256*e[E+31]+e[E+32]);let r=E+33;if(138===m||void 0!==e[r]){let i=[];138===m&&i.push("alarm triggered");const o=0,s=1,d="multistate",_=l(e[r]);r+=1;const p=e[r+1];"0"===_[2]&&"0"===_[3]&&(n.zclheader.alarmmsg=i),"0"===_[2]&&"1"===_[3]&&c(1,i,o,e,n,r),"1"===_[2]&&"0"===_[3]&&u(g,a,10,i,o,e,n,r,t,s,d,p)}}if(32779===g&&0===a){let t=E;const r=e[t-1];n.data.Vrms=i(256*e[t+1]+e[t+2],2)/10,t+=2,n.data.Irms=i(256*e[t+1]+e[t+2],2)/10,t+=2,n.data.angle=i(256*e[t+1]+e[t+2],2);let o=t+3;if(138===m||void 0!==e[o]){let t=[];138===m&&t.push("alarm triggered");const i=0,s=1,d="multistate",_=l(e[o]);o+=1;const p=e[o+1];"0"===_[2]&&"0"===_[3]&&(n.zclheader.alarmmsg=t),"0"===_[2]&&"1"===_[3]&&c(1,t,i,e,n,o),"1"===_[2]&&"0"===_[3]&&u(g,a,6,t,i,e,n,o,r,s,d,p)}}if(32781===g&&0===a){const t=e[E-1];n.data.Vrms_a=i(256*e[E+1]+e[E+2],2)/10,n.data.Irms_a=i(256*e[E+3]+e[E+4],2)/10,n.data.angle_a=i(256*e[E+5]+e[E+6],2),n.data.Vrms_b=i(256*e[E+7]+e[E+8],2)/10,n.data.Irms_b=i(256*e[E+9]+e[E+10],2)/10,n.data.angle_b=i(256*e[E+11]+e[E+12],2),n.data.Vrms_c=i(256*e[E+13]+e[E+14],2)/10,n.data.Irms_c=i(256*e[E+15]+e[E+16],2)/10,n.data.angle_c=i(256*e[E+17]+e[E+18],2);let r=E+19;if(138===m||void 0!==e[r]){let i=[];138===m&&i.push("alarm triggered");const o=0,s=1,d="multistate",_=l(e[r]);r+=1;const p=e[r+1];"0"===_[2]&&"0"===_[3]&&(n.zclheader.alarmmsg=i),"0"===_[2]&&"1"===_[3]&&c(1,i,o,e,n,r),"1"===_[2]&&"0"===_[3]&&u(g,a,6,i,o,e,n,r,t,s,d,p)}}if(32780===g&&0===a){const t=e[E-1];n.data.concentration=256*e[E]+e[E+1];let i=E+2;if(138===m||void 0!==e[i]){let r=[];138===m&&r.push("alarm triggered");const o=0,s=1,d=l(e[i]),_="none";i+=1,"0"===d[2]&&"0"===d[3]&&(n.zclheader.alarmmsg=r),"0"===d[2]&&"1"===d[3]&&c(1,r,o,e,n,i),"1"===d[2]&&"0"===d[3]&&u(g,a,6,r,o,e,n,i,t,s,_)}}if(32780===g&&1===a&&(n.data.analog=e[E]),32780===g&&2===a&&(n.data.analog=e[E]),1024===g&&0===a){const t=e[E-1];n.data.illuminance=256*e[E]+e[E+1];let i=E+2;if(138===m||void 0!==e[i]){let r=[];138===m&&r.push("alarm triggered");const o=0,s=1,d=l(e[i]),_="none";i+=1,"0"===d[2]&&"0"===d[3]&&(n.zclheader.alarmmsg=r),"0"===d[2]&&"1"===d[3]&&c(1,r,o,e,n,i),"1"===d[2]&&"0"===d[3]&&u(g,a,6,r,o,e,n,i,t,s,_)}}if(1027===g&&0===a){const t=e[E-1];n.data.pressure=i(256*e[E]+e[E+1],2);let r=E+2;if(138===m||void 0!==e[r]){let i=[];138===m&&i.push("alarm triggered");const o=0,s=1,d=l(e[r]),_="int";r+=1,"0"===d[2]&&"0"===d[3]&&(n.zclheader.alarmmsg=i),"0"===d[2]&&"1"===d[3]&&c(1,i,o,e,n,r),"1"===d[2]&&"0"===d[3]&&u(g,a,6,i,o,e,n,r,t,s,_)}}if(1030===g&&0===a){const t=e[E-1];n.data.occupancy=!!e[E];let i=E+1;if(138===m||void 0!==e[i]){let r=[];138===m&&r.push("alarm triggered");const o=0,s=1,d="none",_=l(e[i]);i+=1,"0"===_[2]&&"0"===_[3]&&(n.zclheader.alarmmsg=r),"0"===_[2]&&"1"===_[3]&&c(1,r,o,e,n,i),"1"===_[2]&&"0"===_[3]&&u(g,a,4,r,o,e,n,i,t,s,d)}}if(32850===g&&0===a){let t=E;n.data.frequency=(i(256*e[t+1]+e[t+2],2)+22232)/1e3,t+=2,n.data.frequency_min=(i(256*e[t+1]+e[t+2],2)+22232)/1e3,t+=2,n.data.frequency_max=(i(256*e[t+1]+e[t+2],2)+22232)/1e3,t+=2,n.data.Vrms=i(256*e[t+1]+e[t+2],2)/10,t+=2,n.data.Vrms_min=i(256*e[t+1]+e[t+2],2)/10,t+=2,n.data.Vrms_max=i(256*e[t+1]+e[t+2],2)/10,t+=2,n.data.Vpeak=i(256*e[t+1]+e[t+2],2)/10,t+=2,n.data.Vpeak_min=i(256*e[t+1]+e[t+2],2)/10,t+=2,n.data.Vpeak_max=i(256*e[t+1]+e[t+2],2)/10,t+=2,n.data.over_voltage=i(256*e[t+1]+e[t+2],2),t+=2,n.data.sag_voltage=i(256*e[t+1]+e[t+2],2)}if(32783===g){let t=E+1;if(0===a){let a=n.data.last={};a.NbTriggedAcq=o(e,t,"U32"),t+=4,a.Mean_X_G=o(e,t,"U16")/100,t+=2,a.Max_X_G=o(e,t,"U16")/100,t+=2,a.Dt_X_ms=o(e,t,"U16"),t+=2,a.Mean_Y_G=o(e,t,"U16")/100,t+=2,a.Max_Y_G=o(e,t,"U16")/100,t+=2,a.Dt_Y_ms=o(e,t,"U16"),t+=2,a.Mean_Z_G=o(e,t,"U16")/100,t+=2,a.Max_Z_G=o(e,t,"U16")/100,t+=2,a.Dt_Z_ms=o(e,t,"U16")}else if(1===a||2===a||3===a){let i=1===a?"Stats_X":2===a?"Stats_Y":"Stats_Z",r=n.data[i]={};r.NbAcq=o(e,t,"U16"),t+=2,r.MinMean_G=o(e,t,"U16")/100,t+=2,r.MinMax_G=o(e,t,"U16")/100,t+=2,r.MinDt=o(e,t,"U16"),t+=2,r.MeanMean_G=o(e,t,"U16")/100,t+=2,r.MeanMax_G=o(e,t,"U16")/100,t+=2,r.MeanDt=o(e,t,"U16"),t+=2,r.MaxMean_G=o(e,t,"U16")/100,t+=2,r.MaxMax_G=o(e,t,"U16")/100,t+=2,r.MaxDt=o(e,t,"U16"),t+=2}else if(32768===a){let a=n.data.params={};a.WaitFreq_Hz=o(e,t,"U16")/10,t+=2,a.AcqFreq_Hz=o(e,t,"U16")/10,t+=2;let i=o(e,t,"U16");t+=2,32768&i&&(i=60*(-32769&i)),a.NewWaitDelay_s=32768&i?i=60*(-32769&i):i,a.MaxAcqDuration_ms=o(e,t,"U16"),t+=2,a.Threshold_X_G=o(e,t,"U16")/100,t+=2,a.Threshold_Y_G=o(e,t,"U16")/100,t+=2,a.Threshold_Z_G=o(e,t,"U16")/100,t+=2,a.OverThrsh_Dt_ms=o(e,t,"U16"),t+=2,a.UnderThrsh_Dt_ms=o(e,t,"U16"),t+=2,a.Range_G=o(e,t,"U16")/100,t+=2,a.FilterSmoothCoef=o(e,t,"U8"),t+=1,a.FilterGainCoef=o(e,t,"U8"),t+=1,a=n.data.Params.working_modes={},a.SignalEachAcq=128&e[t]?"true":"false",a.RstAftStdRpt_X=1&e[t]?"true":"false",a.RstAftStdRpt_Y=2&e[t]?"true":"false",a.RstAftStdRpt_7=4&e[t]?"true":"false"}}let P=Object.keys(n.data)[0];if(void 0===n.data[P])throw new t("bad payload");if(e.length<=7)throw new t("bad payload")}if(7===m){_=1,a=256*e[6]+e[7],n.zclheader.attID=s(a,4),n.zclheader.status=e[4],n.zclheader.report_parameters={};let t=l(e[5]);n.zclheader.report_parameters.new_mode_configuration=t[0],"0"===t[2]&&"0"===t[3]&&(n.zclheader.report_parameters.cause_request="none"),"0"===t[2]&&"1"===t[3]&&(n.zclheader.report_parameters.cause_request="short"),"1"===t[2]&&"0"===t[3]&&(n.zclheader.report_parameters.cause_request="long"),"1"===t[2]&&"1"===t[3]&&(n.zclheader.report_parameters.cause_request="reserved"),n.zclheader.report_parameters.secured_if_alarm=t[4],n.zclheader.report_parameters.secured=t[5],n.zclheader.report_parameters.no_hearde_port=t[6],n.zclheader.report_parameters.batch=t[7]}if(9===m){_=1,a=256*e[6]+e[7],n.zclheader.attID=s(a,4),n.zclheader.status=e[4],n.zclheader.report_parameters={};let t=l(e[5]);if(n.zclheader.report_parameters.new_mode_configuration=t[0],"0"===t[2]&&"0"===t[3]&&(n.zclheader.report_parameters.cause_request="none"),"0"===t[2]&&"1"===t[3]&&(n.zclheader.report_parameters.cause_request="short"),"1"===t[2]&&"0"===t[3]&&(n.zclheader.report_parameters.cause_request="long"),"1"===t[2]&&"1"===t[3]&&(n.zclheader.report_parameters.cause_request="reserved"),n.zclheader.report_parameters.secured_if_alarm=t[4],n.zclheader.report_parameters.secured=t[5],n.zclheader.report_parameters.no_hearde_port=t[6],n.zclheader.report_parameters.batch=t[7],n.zclheader.attribut_type=e[8],n.zclheader.min={},128&~e[9]?(n.zclheader.min.value=256*e[9]+e[10],n.zclheader.min.unit="seconds"):(n.zclheader.min.value=256*(e[9]-128)+e[10],n.zclheader.min.unit="minutes"),n.zclheader.max={},128&~e[11]?(n.zclheader.max.value=256*e[11]+e[12],n.zclheader.max.unit="seconds"):(n.zclheader.max.value=256*(e[11]-128)+e[12],n.zclheader.max.unit="minutes"),n.lora.payload="",80===g&&6===a){let t=e[13]/5,a=0;for(;t>0;)n.zclheader.modepower=e[14+5*a],n.zclheader.powersource=e[15+5*a],n.zclheader.delta=256*e[16+5*a]+e[17+5*a],n.zclheader.changedpowersource=e[18+5*a],a++,t--}}if(0===_)throw new t("bad payload")}else n.batch={},n.batch.report="batch";return n}e.exports={normalisation_standard:function(e,a){let n=[],i=e.bytes,r=m(i,e.fPort);if(void 0!==r.zclheader){if(void 0!==r.zclheader.alarmmsg&&(n=r.zclheader.alarmmsg),7===i[1])return{data:r.zclheader,warning:n};if(9===i[1])return{data:r.zclheader,warning:n};if(1===i[1]){if(void 0===r.zclheader.data){let t=[],a=!0,i=0;for(;a;){let n=Object.keys(r.data)[i];if(void 0===n){a=!1;break}t.push({variable:n,value:r.data[n],date:e.recvTime}),i++}return{data:t,type:"standard",warning:n}}return{data:{variable:"read reporting configuration response status",value:r.zclheader.data,date:e.recvTime},warning:n}}}if(void 0!==r.zclheader){if(void 0!==a){let t=r.zclheader.endpoint,i=!0,o=0,s=[],d="";for(;i;){let n=Object.keys(r.data)[o];if(void 0===n){i=!1;break}void 0===a[n]?s.push({variable:n,value:r.data[n],date:e.recvTime}):(d=a[n][t],"NA"===d?s.push({variable:d,value:"NA",date:e.recvTime}):s.push({variable:d,value:r.data[n],date:e.recvTime})),o++}return{data:s,type:"standard",warning:n}}throw new t("bad decoding")}return{type:r.batch.report,payload:r.lora.payload}}}}},t={};function a(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,a),r.exports}var n={};(()=>{var e=n;let t=a(174),i=[],r={positive_active_energy:["positive_active_energy_a","positive_active_energy_b","positive_active_energy_c","positive_active_energy_abc"],negative_active_energy:["negative_active_energy_a","negative_active_energy_b","negative_active_energy_c","negative_active_energy_abc"],positive_reactive_energy:["positive_reactive_energy_a","positive_reactive_energy_b","positive_reactive_energy_c","positive_reactive_energy_abc"],negative_reactive_energy:["negative_reactive_energy_a","negative_reactive_energy_b","negative_reactive_energy_c","negative_reactive_energy_abc"],positive_active_power:["positive_active_power_a","positive_active_power_b","positive_active_power_c","positive_active_power_abc"],negative_active_power:["negative_active_power_a","negative_active_power_b","negative_active_power_c","negative_active_power_abc"],positive_reactive_power:["positive_reactive_power_a","positive_reactive_power_b","positive_reactive_power_c","positive_reactive_power_abc"],negative_reactive_power:["negative_reactive_power_a","negative_reactive_power_b","negative_reactive_power_c","negative_reactive_power_abc"],Vrms:["Vrms_a","Vrms_b","Vrms_c"],Irms:["Irms_a","Irms_b","Irms_c"],angle:["angle_a","angle_b","angle_c"]};e.decodeUplink=function(e){return t.watteco_decodeUplink(e,i,r)}})(),driver=n})();if (typeof exports !== "undefined" && typeof module !== "undefined" && module.exports) { exports.driver = driver; }